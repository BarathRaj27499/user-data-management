import{$a as Se,Aa as ve,Ba as Gt,Ca as ye,Cb as io,Da as Ga,Db as ao,Ea as Ue,Eb as oo,Fa as At,Fb as vr,G as fr,Ha,I as xt,J as pr,Ja as za,Jb as so,K as Kt,Ka as Di,Kb as Re,La as oe,M as Et,Ma as se,Mb as zt,Na as Wa,O as hr,Oa as $a,Pa as ie,Qa as S,Ra as V,Sa as Ne,Ta as le,U as X,Ua as me,V as Z,Va as Ht,Wa as Ya,Xa as Qa,Y as Ka,Ya as _e,Za as gr,_ as xe,_a as ee,a as De,ab as q,b as je,bb as Ja,c as Is,cb as Xa,d as ks,da as Oe,db as Za,ea as it,eb as Ve,fa as qt,fb as eo,ga as _n,gb as fe,h as Ra,ha as bn,hb as P,ib as pe,jb as Be,k as Ua,kb as to,lb as Si,mb as Vi,nb as Mi,oa as at,ob as Dt,p as Ba,pa as j,pb as no,qb as Cn,rb as xn,ta as qa,tb as En,u as La,va as wn,vb as An,wa as K,xb as ro,yb as Pi}from"./chunk-ZFNHU6GG.js";var Ho=Is(($i,Yi)=>{"use strict";(function(o,r){typeof $i=="object"&&typeof Yi<"u"?Yi.exports=r():typeof define=="function"&&define.amd?define(r):(o=typeof globalThis<"u"?globalThis:o||self).Dexie=r()})($i,function(){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])})(e,t)},r=function(){return(r=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var l in t=arguments[i])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function n(e,t,i){if(i||arguments.length===2)for(var a,l=0,u=t.length;l<u;l++)!a&&l in t||((a=a||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(a||Array.prototype.slice.call(t))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,d=Object.keys,E=Array.isArray;function O(e,t){return typeof t!="object"||d(t).forEach(function(i){e[i]=t[i]}),e}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var W=Object.getPrototypeOf,re={}.hasOwnProperty;function Y(e,t){return re.call(e,t)}function ue(e,t){typeof t=="function"&&(t=t(W(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(t).forEach(function(i){Pe(e,i,t[i])})}var ze=Object.defineProperty;function Pe(e,t,i,a){ze(e,t,O(i&&Y(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function Ie(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Pe(e.prototype,"constructor",e),{extend:ue.bind(null,e.prototype)}}}}var tn=Object.getOwnPropertyDescriptor,jn=[].slice;function Pt(e,t,i){return jn.call(e,t,i)}function Rn(e,t){return t(e)}function nn(e){if(!e)throw new Error("Assertion Failed")}function Ji(e){s.setImmediate?setImmediate(e):setTimeout(e,0)}function We(e,t){if(typeof t=="string"&&Y(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],a=0,l=t.length;a<l;++a){var u=We(e,t[a]);i.push(u)}return i}var c=t.indexOf(".");if(c!==-1){var m=e[t.substr(0,c)];return m==null?void 0:We(m,t.substr(c+1))}}function Ae(e,t,i){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){nn(typeof i!="string"&&"length"in i);for(var a=0,l=t.length;a<l;++a)Ae(e,t[a],i[a])}else{var u,c,m=t.indexOf(".");m!==-1?(u=t.substr(0,m),(c=t.substr(m+1))===""?i===void 0?E(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=i:Ae(m=!(m=e[u])||!Y(e,u)?e[u]={}:m,c,i)):i===void 0?E(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function Xi(e){var t,i={};for(t in e)Y(e,t)&&(i[t]=e[t]);return i}var Qo=[].concat;function Zi(e){return Qo.apply([],e)}var ft="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Zi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return s[e]}),ea=new Set(ft.map(function(e){return s[e]})),rn=null;function ct(e){return rn=new WeakMap,e=(function t(i){if(!i||typeof i!="object")return i;var a=rn.get(i);if(a)return a;if(E(i)){a=[],rn.set(i,a);for(var l=0,u=i.length;l<u;++l)a.push(t(i[l]))}else if(ea.has(i.constructor))a=i;else{var c,m=W(i);for(c in a=m===Object.prototype?{}:Object.create(m),rn.set(i,a),i)Y(i,c)&&(a[c]=t(i[c]))}return a})(e),rn=null,e}var Jo={}.toString;function Lr(e){return Jo.call(e).slice(8,-1)}var Kr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Xo=typeof Kr=="symbol"?function(e){var t;return e!=null&&(t=e[Kr])&&t.apply(e)}:function(){return null};function dt(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var It={};function $e(e){var t,i,a,l;if(arguments.length===1){if(E(e))return e.slice();if(this===It&&typeof e=="string")return[e];if(l=Xo(e)){for(i=[];!(a=l.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(i=new Array(t);t--;)i[t]=e[t];return i}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var qr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},sn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Te=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(sn),Zo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function kt(e,t){this.name=e,this.message=t}function ta(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,a,l){return l.indexOf(i)===a}).join(`
`)}function Un(e,t,i,a){this.failures=t,this.failedKeys=a,this.successCount=i,this.message=ta(e,t)}function Ft(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=ta(e,this.failures)}Ie(kt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Ie(Un).from(kt),Ie(Ft).from(kt);var Gr=Te.reduce(function(e,t){return e[t]=t+"Error",e},{}),es=kt,L=Te.reduce(function(e,t){var i=t+"Error";function a(l,u){this.name=i,l?typeof l=="string"?(this.message="".concat(l).concat(u?`
 `+u:""),this.inner=u||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=Zo[t]||i,this.inner=null)}return Ie(a).from(es),e[t]=a,e},{});L.Syntax=SyntaxError,L.Type=TypeError,L.Range=RangeError;var na=sn.reduce(function(e,t){return e[t+"Error"]=L[t],e},{}),Bn=Te.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=L[t]),e},{});function te(){}function an(e){return e}function ts(e,t){return e==null||e===an?t:function(i){return t(e(i))}}function mt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ns(e,t){return e===te?t:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?mt(a,this.onsuccess):a),l&&(this.onerror=this.onerror?mt(l,this.onerror):l),u!==void 0?u:i}}function rs(e,t){return e===te?t:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?mt(i,this.onsuccess):i),a&&(this.onerror=this.onerror?mt(a,this.onerror):a)}}function is(e,t){return e===te?t:function(i){var a=e.apply(this,arguments);O(i,a);var l=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,i=t.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?mt(l,this.onsuccess):l),u&&(this.onerror=this.onerror?mt(u,this.onerror):u),a===void 0?i===void 0?void 0:i:O(a,i)}}function as(e,t){return e===te?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Hr(e,t){return e===te?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,l=arguments.length,u=new Array(l);l--;)u[l]=arguments[l];return i.then(function(){return t.apply(a,u)})}return t.apply(this,arguments)}}Bn.ModifyError=Un,Bn.DexieError=kt,Bn.BulkError=Ft;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ra(e){Le=e}var on={},ia=100,ft=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,W(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,W(t),e]})(),sn=ft[0],Te=ft[1],ft=ft[2],Te=Te&&Te.then,pt=sn&&sn.constructor,zr=!!ft,ln=function(e,t){un.push([e,t]),Ln&&(queueMicrotask(ss),Ln=!1)},Wr=!0,Ln=!0,ht=[],Kn=[],$r=an,Je={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:te,pgp:!1,env:{},finalize:te},B=Je,un=[],gt=0,qn=[];function R(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=B;if(typeof e!="function"){if(e!==on)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qr(this,this._value))}this._state=null,this._value=null,++t.ref,(function i(a,l){try{l(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&Ot();u&&typeof u.then=="function"?i(a,function(m,p){u instanceof R?u._then(m,p):u.then(m,p)}):(a._state=!0,a._value=u,oa(a)),c&&Nt()}},Qr.bind(null,a))}catch(u){Qr(a,u)}})(this,e)}var Yr={get:function(){var e=B,t=Wn;function i(a,l){var u=this,c=!e.global&&(e!==B||t!==Wn),m=c&&!Ze(),p=new R(function(h,_){Jr(u,new aa(la(a,e,c,m),la(l,e,c,m),h,_,e))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return i.prototype=on,i},set:function(e){Pe(this,"then",e&&e.prototype===on?Yr:{get:function(){return e},set:Yr.set})}};function aa(e,t,i,a,l){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=a,this.psd=l}function Qr(e,t){var i,a;Kn.push(t),e._state===null&&(i=e._lib&&Ot(),t=$r(t),e._state=!1,e._value=t,a=e,ht.some(function(l){return l._value===a._value})||ht.push(a),oa(e),i&&Nt())}function oa(e){var t=e._listeners;e._listeners=[];for(var i=0,a=t.length;i<a;++i)Jr(e,t[i]);var l=e._PSD;--l.ref||l.finalize(),gt===0&&(++gt,ln(function(){--gt==0&&Xr()},[]))}function Jr(e,t){if(e._state!==null){var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++gt,ln(os,[i,e,t])}else e._listeners.push(t)}function os(e,t,i){try{var a,l=t._value;!t._state&&Kn.length&&(Kn=[]),a=Le&&t._consoleTask?t._consoleTask.run(function(){return e(l)}):e(l),t._state||Kn.indexOf(l)!==-1||(function(u){for(var c=ht.length;c;)if(ht[--c]._value===u._value)return ht.splice(c,1)})(t),i.resolve(a)}catch(u){i.reject(u)}finally{--gt==0&&Xr(),--i.psd.ref||i.psd.finalize()}}function ss(){vt(Je,function(){Ot()&&Nt()})}function Ot(){var e=Wr;return Ln=Wr=!1,e}function Nt(){var e,t,i;do for(;0<un.length;)for(e=un,un=[],i=e.length,t=0;t<i;++t){var a=e[t];a[0].apply(null,a[1])}while(0<un.length);Ln=Wr=!0}function Xr(){var e=ht;ht=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=qn.slice(0),i=t.length;i;)t[--i]()}function Gn(e){return new R(on,!1,e)}function ae(e,t){var i=B;return function(){var a=Ot(),l=B;try{return et(i,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{et(l,!1),a&&Nt()}}}ue(R.prototype,{then:Yr,_then:function(e,t){Jr(this,new aa(null,null,e,t,B))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,i=arguments[1];return typeof t=="function"?this.then(null,function(a){return(a instanceof t?i:Gn)(a)}):this.then(null,function(a){return(a&&a.name===t?i:Gn)(a)})},finally:function(e){return this.then(function(t){return R.resolve(e()).then(function(){return t})},function(t){return R.resolve(e()).then(function(){return Gn(t)})})},timeout:function(e,t){var i=this;return e<1/0?new R(function(a,l){var u=setTimeout(function(){return l(new L.Timeout(t))},e);i.then(a,l).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pe(R.prototype,Symbol.toStringTag,"Dexie.Promise"),Je.env=sa(),ue(R,{all:function(){var e=$e.apply(null,arguments).map($n);return new R(function(t,i){e.length===0&&t([]);var a=e.length;e.forEach(function(l,u){return R.resolve(l).then(function(c){e[u]=c,--a||t(e)},i)})})},resolve:function(e){return e instanceof R?e:e&&typeof e.then=="function"?new R(function(t,i){e.then(t,i)}):new R(on,!0,e)},reject:Gn,race:function(){var e=$e.apply(null,arguments).map($n);return new R(function(t,i){e.map(function(a){return R.resolve(a).then(t,i)})})},PSD:{get:function(){return B},set:function(e){return B=e}},totalEchoes:{get:function(){return Wn}},newPSD:Xe,usePSD:vt,scheduler:{get:function(){return ln},set:function(e){ln=e}},rejectionMapper:{get:function(){return $r},set:function(e){$r=e}},follow:function(e,t){return new R(function(i,a){return Xe(function(l,u){var c=B;c.unhandleds=[],c.onunhandled=u,c.finalize=mt(function(){var m,p=this;m=function(){p.unhandleds.length===0?l():u(p.unhandleds[0])},qn.push(function h(){m(),qn.splice(qn.indexOf(h),1)}),++gt,ln(function(){--gt==0&&Xr()},[])},c.finalize),e()},t,i,a)})}}),pt&&(pt.allSettled&&Pe(R,"allSettled",function(){var e=$e.apply(null,arguments).map($n);return new R(function(t){e.length===0&&t([]);var i=e.length,a=new Array(i);e.forEach(function(l,u){return R.resolve(l).then(function(c){return a[u]={status:"fulfilled",value:c}},function(c){return a[u]={status:"rejected",reason:c}}).then(function(){return--i||t(a)})})})}),pt.any&&typeof AggregateError<"u"&&Pe(R,"any",function(){var e=$e.apply(null,arguments).map($n);return new R(function(t,i){e.length===0&&i(new AggregateError([]));var a=e.length,l=new Array(a);e.forEach(function(u,c){return R.resolve(u).then(function(m){return t(m)},function(m){l[c]=m,--a||i(new AggregateError(l))})})})}),pt.withResolvers&&(R.withResolvers=pt.withResolvers));var he={awaits:0,echoes:0,id:0},ls=0,Hn=[],zn=0,Wn=0,us=0;function Xe(e,t,i,a){var l=B,u=Object.create(l);return u.parent=l,u.ref=0,u.global=!1,u.id=++us,Je.env,u.env=zr?{Promise:R,PromiseProp:{value:R,configurable:!0,writable:!0},all:R.all,race:R.race,allSettled:R.allSettled,any:R.any,resolve:R.resolve,reject:R.reject}:{},t&&O(u,t),++l.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},a=vt(u,e,i,a),u.ref===0&&u.finalize(),a}function Tt(){return he.id||(he.id=++ls),++he.awaits,he.echoes+=ia,he.id}function Ze(){return!!he.awaits&&(--he.awaits==0&&(he.id=0),he.echoes=he.awaits*ia,!0)}function $n(e){return he.echoes&&e&&e.constructor===pt?(Tt(),e.then(function(t){return Ze(),t},function(t){return Ze(),ce(t)})):e}function cs(){var e=Hn[Hn.length-1];Hn.pop(),et(e,!1)}function et(e,t){var i,a=B;(t?!he.echoes||zn++&&e===B:!zn||--zn&&e===B)||queueMicrotask(t?function(l){++Wn,he.echoes&&--he.echoes!=0||(he.echoes=he.awaits=he.id=0),Hn.push(B),et(l,!0)}.bind(null,e):cs),e!==B&&(B=e,a===Je&&(Je.env=sa()),zr&&(i=Je.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(s,"Promise",t.PromiseProp),i.all=t.all,i.race=t.race,i.resolve=t.resolve,i.reject=t.reject,t.allSettled&&(i.allSettled=t.allSettled),t.any&&(i.any=t.any))))}function sa(){var e=s.Promise;return zr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function vt(e,t,i,a,l){var u=B;try{return et(e,!0),t(i,a,l)}finally{et(u,!1)}}function la(e,t,i,a){return typeof e!="function"?e:function(){var l=B;i&&Tt(),et(t,!0);try{return e.apply(this,arguments)}finally{et(l,!1),a&&queueMicrotask(Ze)}}}function Zr(e){Promise===pt&&he.echoes===0?zn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Te).indexOf("[native code]")===-1&&(Tt=Ze=te);var ce=R.reject,yt="\uFFFF",Ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ua="String expected.",jt=[],Yn="__dbnames",ei="readonly",ti="readwrite";function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ca={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=ct(t))[e],t}}function da(){throw L.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Q(e,t){try{var i=ma(e),a=ma(t);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return(function(l,u){for(var c=l.length,m=u.length,p=c<m?c:m,h=0;h<p;++h)if(l[h]!==u[h])return l[h]<u[h]?-1:1;return c===m?0:c<m?-1:1})(fa(e),fa(t));case"Array":return(function(l,u){for(var c=l.length,m=u.length,p=c<m?c:m,h=0;h<p;++h){var _=Q(l[h],u[h]);if(_!==0)return _}return c===m?0:c<m?-1:1})(e,t)}}catch{}return NaN}function ma(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Lr(e),e==="ArrayBuffer"?"binary":e)}function fa(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Jn(e,t,i){var a=e.schema.yProps;return a?(t&&0<i.numFailures&&(t=t.filter(function(l,u){return!i.failures[u]})),Promise.all(a.map(function(l){return l=l.updatesTable,t?e.db.table(l).where("k").anyOf(t).delete():e.db.table(l).clear()})).then(function(){return i})):i}var cn=(pa.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var i=t.add;if(E(i))return n(n([],E(e)?e:[],!0),i,!0).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(t.remove!==void 0){var a=t.remove;if(E(a))return E(e)?e.filter(function(l){return!a.includes(l)}).sort():[];if(typeof a=="number")return Number(e)-a;if(typeof a=="bigint")try{return BigInt(e)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return i=(i=t.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof e=="string"&&e.startsWith(i)?t.replacePrefix[1]+e.substring(i.length):e},pa);function pa(e){this["@@propmod"]=e}function ha(e,t){for(var i=d(t),a=i.length,l=!1,u=0;u<a;++u){var c=i[u],m=t[c],p=We(e,c);m instanceof cn?(Ae(e,c,m.execute(p)),l=!0):p!==m&&(Ae(e,c,m),l=!0)}return l}var ga=(ne.prototype._trans=function(e,t,i){var a=this._tx||B.trans,l=this.name,u=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function c(h,_,f){if(!f.schema[l])throw new L.NotFound("Table "+l+" not part of transaction");return t(f.idbtrans,f)}var m=Ot();try{var p=a&&a.db._novip===this.db._novip?a===B.trans?a._promise(e,c,i):Xe(function(){return a._promise(e,c,i)},{trans:a,transless:B.transless||B}):(function h(_,f,w,g){if(_.idbdb&&(_._state.openComplete||B.letThrough||_._vip)){var v=_._createTransaction(f,w,_._dbSchema);try{v.create(),_._state.PR1398_maxLoop=3}catch(y){return y.name===Gr.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return h(_,f,w,g)})):ce(y)}return v._promise(f,function(y,b){return Xe(function(){return B.trans=v,g(y,b,v)})}).then(function(y){if(f==="readwrite")try{v.idbtrans.commit()}catch{}return f==="readonly"?y:v._completion.then(function(){return y})})}if(_._state.openComplete)return ce(new L.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return ce(new L.DatabaseClosed);_.open().catch(te)}return _._state.dbReadyPromise.then(function(){return h(_,f,w,g)})})(this.db,e,[this.name],c);return u&&(p._consoleTask=u,p=p.catch(function(h){return console.trace(h),ce(h)})),p}finally{m&&Nt()}},ne.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ce(new L.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(l){return i.hook.reading.fire(l)})}).then(t)},ne.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(E(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=d(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(m){if(m.compound&&t.every(function(h){return 0<=m.keyPath.indexOf(h)})){for(var p=0;p<t.length;++p)if(t.indexOf(m.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(m,p){return m.keyPath.length-p.keyPath.length})[0];if(i&&this.db._maxKey!==yt){var u=i.keyPath.slice(0,t.length);return this.where(u).equals(u.map(function(p){return e[p]}))}!i&&Le&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName;function l(m,p){return Q(m,p)===0}var c=t.reduce(function(f,p){var h=f[0],_=f[1],f=a[p],w=e[p];return[h||f,h||!f?_t(_,f&&f.multi?function(g){return g=We(g,p),E(g)&&g.some(function(v){return l(w,v)})}:function(g){return l(w,We(g,p))}):_]},[null,null]),u=c[0],c=c[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):i?this.filter(c):this.where(t).equals("")},ne.prototype.filter=function(e){return this.toCollection().and(e)},ne.prototype.count=function(e){return this.toCollection().count(e)},ne.prototype.offset=function(e){return this.toCollection().offset(e)},ne.prototype.limit=function(e){return this.toCollection().limit(e)},ne.prototype.each=function(e){return this.toCollection().each(e)},ne.prototype.toArray=function(e){return this.toCollection().toArray(e)},ne.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ne.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,E(e)?"[".concat(e.join("+"),"]"):e))},ne.prototype.reverse=function(){return this.toCollection().reverse()},ne.prototype.mapToClass=function(e){var t,i=this.db,a=this.name;function l(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof da&&((function(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function _(){this.constructor=p}o(p,h),p.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)})(l,t=e),Object.defineProperty(l.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),l.prototype.table=function(){return a},e=l);for(var u=new Set,c=e.prototype;c;c=W(c))Object.getOwnPropertyNames(c).forEach(function(p){return u.add(p)});function m(p){if(!p)return p;var h,_=Object.create(e.prototype);for(h in p)if(!u.has(h))try{_[h]=p[h]}catch{}return _}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),e},ne.prototype.defineClass=function(){return this.mapToClass(function(e){O(this,e)})},ne.prototype.add=function(e,t){var i=this,a=this.schema.primKey,l=a.auto,u=a.keyPath,c=e;return u&&l&&(c=Qn(u)(e)),this._trans("readwrite",function(m){return i.core.mutate({trans:m,type:"add",keys:t!=null?[t]:null,values:[c]})}).then(function(m){return m.numFailures?R.reject(m.failures[0]):m.lastResult}).then(function(m){if(u)try{Ae(e,u,m)}catch{}return m})},ne.prototype.upsert=function(e,t){var i=this,a=this.schema.primKey.keyPath;return this._trans("readwrite",function(l){return i.core.get({trans:l,key:e}).then(function(u){var c=u??{};return ha(c,t),a&&Ae(c,a,e),i.core.mutate({trans:l,type:"put",values:[c],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(m){return m.numFailures?R.reject(m.failures[0]):!!u})})})},ne.prototype.update=function(e,t){return typeof e!="object"||E(e)?this.where(":id").equals(e).modify(t):(e=We(e,this.schema.primKey.keyPath),e===void 0?ce(new L.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},ne.prototype.put=function(e,t){var i=this,a=this.schema.primKey,l=a.auto,u=a.keyPath,c=e;return u&&l&&(c=Qn(u)(e)),this._trans("readwrite",function(m){return i.core.mutate({trans:m,type:"put",values:[c],keys:t!=null?[t]:null})}).then(function(m){return m.numFailures?R.reject(m.failures[0]):m.lastResult}).then(function(m){if(u)try{Ae(e,u,m)}catch{}return m})},ne.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]}).then(function(a){return Jn(t,[e],a)}).then(function(a){return a.numFailures?R.reject(a.failures[0]):void 0})})},ne.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ca}).then(function(i){return Jn(e,null,i)})}).then(function(t){return t.numFailures?R.reject(t.failures[0]):void 0})},ne.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(i){return t.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(l){return t.hook.reading.fire(l)})})})},ne.prototype.bulkAdd=function(e,t,i){var a=this,l=Array.isArray(t)?t:void 0,u=(i=i||(l?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(c){var h=a.schema.primKey,m=h.auto,h=h.keyPath;if(h&&l)throw new L.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,h=h&&m?e.map(Qn(h)):e;return a.core.mutate({trans:c,type:"add",keys:l,values:h,wantResults:u}).then(function(v){var f=v.numFailures,w=v.results,g=v.lastResult,v=v.failures;if(f===0)return u?w:g;throw new Ft("".concat(a.name,".bulkAdd(): ").concat(f," of ").concat(p," operations failed"),v)})})},ne.prototype.bulkPut=function(e,t,i){var a=this,l=Array.isArray(t)?t:void 0,u=(i=i||(l?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",function(c){var h=a.schema.primKey,m=h.auto,h=h.keyPath;if(h&&l)throw new L.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new L.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,h=h&&m?e.map(Qn(h)):e;return a.core.mutate({trans:c,type:"put",keys:l,values:h,wantResults:u}).then(function(v){var f=v.numFailures,w=v.results,g=v.lastResult,v=v.failures;if(f===0)return u?w:g;throw new Ft("".concat(a.name,".bulkPut(): ").concat(f," of ").concat(p," operations failed"),v)})})},ne.prototype.bulkUpdate=function(e){var t=this,i=this.core,a=e.map(function(c){return c.key}),l=e.map(function(c){return c.changes}),u=[];return this._trans("readwrite",function(c){return i.getMany({trans:c,keys:a,cache:"clone"}).then(function(m){var p=[],h=[];e.forEach(function(f,w){var g=f.key,v=f.changes,y=m[w];if(y){for(var b=0,C=Object.keys(v);b<C.length;b++){var x=C[b],A=v[x];if(x===t.schema.primKey.keyPath){if(Q(A,g)!==0)throw new L.Constraint("Cannot update primary key in bulkUpdate()")}else Ae(y,x,A)}u.push(w),p.push(g),h.push(y)}});var _=p.length;return i.mutate({trans:c,type:"put",keys:p,values:h,updates:{keys:a,changeSpecs:l}}).then(function(f){var w=f.numFailures,g=f.failures;if(w===0)return _;for(var v=0,y=Object.keys(g);v<y.length;v++){var b,C=y[v],x=u[Number(C)];x!=null&&(b=g[C],delete g[C],g[x]=b)}throw new Ft("".concat(t.name,".bulkUpdate(): ").concat(w," of ").concat(_," operations failed"),g)})})})},ne.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",function(a){return t.core.mutate({trans:a,type:"delete",keys:e}).then(function(l){return Jn(t,e,l)})}).then(function(c){var l=c.numFailures,u=c.lastResult,c=c.failures;if(l===0)return u;throw new Ft("".concat(t.name,".bulkDelete(): ").concat(l," of ").concat(i," operations failed"),c)})},ne);function ne(){}function dn(e){function t(c,m){if(m){for(var p=arguments.length,h=new Array(p-1);--p;)h[p-1]=arguments[p];return i[c].subscribe.apply(null,h),e}if(typeof c=="string")return i[c]}var i={};t.addEventType=u;for(var a=1,l=arguments.length;a<l;++a)u(arguments[a]);return t;function u(c,m,p){if(typeof c!="object"){var h;m=m||as;var _={subscribers:[],fire:p=p||te,subscribe:function(f){_.subscribers.indexOf(f)===-1&&(_.subscribers.push(f),_.fire=m(_.fire,f))},unsubscribe:function(f){_.subscribers=_.subscribers.filter(function(w){return w!==f}),_.fire=_.subscribers.reduce(m,p)}};return i[c]=t[c]=_}d(h=c).forEach(function(f){var w=h[f];if(E(w))u(f,h[f][0],h[f][1]);else{if(w!=="asap")throw new L.InvalidArgument("Invalid event config");var g=u(f,an,function(){for(var v=arguments.length,y=new Array(v);v--;)y[v]=arguments[v];g.subscribers.forEach(function(b){Ji(function(){b.apply(null,y)})})})}})}}function mn(e,t){return Ie(t).from({prototype:e}),t}function Rt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ni(e,t){e.filter=_t(e.filter,t)}function ri(e,t,i){var a=e.replayFilter;e.replayFilter=a?function(){return _t(a(),t())}:t,e.justLimit=i&&!a}function Xn(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new L.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function va(e,t,i){var a=Xn(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function Zn(e,t,i,a){var l=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},c=function(m,p,h){var _,f;l&&!l(p,h,function(w){return p.stop(w)},function(w){return p.fail(w)})||((f=""+(_=p.primaryKey))=="[object ArrayBuffer]"&&(f=""+new Uint8Array(_)),Y(u,f)||(u[f]=!0,t(m,p,h)))};return Promise.all([e.or._iterate(c,i),ya(va(e,a,i),e.algorithm,c,!e.keysOnly&&e.valueMapper)])}return ya(va(e,a,i),_t(e.algorithm,l),t,!e.keysOnly&&e.valueMapper)}function ya(e,t,i,a){var l=ae(a?function(u,c,m){return i(a(u),c,m)}:i);return e.then(function(u){if(u)return u.start(function(){var c=function(){return u.continue()};t&&!t(u,function(m){return c=m},function(m){u.stop(m),c=te},function(m){u.fail(m),c=te})||l(u.value,u,function(m){return c=m}),c()})})}var ds=(J.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,ce.bind(null,i.error)):i.table._trans("readonly",e).then(t)},J.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ce.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},J.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)},J.prototype._iterate=function(e,t){return Zn(this._ctx,e,t,this._ctx.table.core)},J.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&O(i,e),t._ctx=i,t},J.prototype.raw=function(){return this._ctx.valueMapper=null,this},J.prototype.each=function(e){var t=this._ctx;return this._read(function(i){return Zn(t,e,i,t.table.core)})},J.prototype.count=function(e){var t=this;return this._read(function(i){var a=t._ctx,l=a.table.core;if(Rt(a,!0))return l.count({trans:i,query:{index:Xn(a,l.schema),range:a.range}}).then(function(c){return Math.min(c,a.limit)});var u=0;return Zn(a,function(){return++u,!1},i,l).then(function(){return u})}).then(e)},J.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),a=i[0],l=i.length-1;function u(p,h){return h?u(p[i[h]],h-1):p[a]}var c=this._ctx.dir==="next"?1:-1;function m(p,h){return Q(u(p,l),u(h,l))*c}return this.toArray(function(p){return p.sort(m)}).then(t)},J.prototype.toArray=function(e){var t=this;return this._read(function(i){var a=t._ctx;if(a.dir==="next"&&Rt(a,!0)&&0<a.limit){var l=a.valueMapper,u=Xn(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:u,range:a.range}}).then(function(m){return m=m.result,l?m.map(l):m})}var c=[];return Zn(a,function(m){return c.push(m)},i,a.table.core).then(function(){return c})},e)},J.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Rt(t)?ri(t,function(){var i=e;return function(a,l){return i===0||(i===1?--i:l(function(){a.advance(i),i=0}),!1)}}):ri(t,function(){var i=e;return function(){return--i<0}})),this},J.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ri(this._ctx,function(){var t=e;return function(i,a,l){return--t<=0&&a(l),0<=t}},!0),this},J.prototype.until=function(e,t){return ni(this._ctx,function(i,a,l){return!e(i.value)||(a(l),t)}),this},J.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},J.prototype.last=function(e){return this.reverse().first(e)},J.prototype.filter=function(e){var t;return ni(this._ctx,function(i){return e(i.value)}),(t=this._ctx).isMatch=_t(t.isMatch,e),this},J.prototype.and=function(e){return this.filter(e)},J.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},J.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},J.prototype.desc=function(){return this.reverse()},J.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,a){e(a.key,a)})},J.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},J.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},J.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(a,l){i.push(l.key)}).then(function(){return i}).then(e)},J.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Rt(t,!0)&&0<t.limit)return this._read(function(a){var l=Xn(t,t.table.core.schema);return t.table.core.query({trans:a,values:!1,limit:t.limit,query:{index:l,range:t.range}})}).then(function(a){return a.result}).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each(function(a,l){i.push(l.primaryKey)}).then(function(){return i}).then(e)},J.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},J.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},J.prototype.lastKey=function(e){return this.reverse().firstKey(e)},J.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return ni(this._ctx,function(l){var a=l.primaryKey.toString(),l=Y(t,a);return t[a]=!0,!l}),this},J.prototype.modify=function(e){var t=this,i=this._ctx;return this._write(function(a){var l=typeof e=="function"?e:function(y){return ha(y,e)},u=i.table.core,h=u.schema.primaryKey,c=h.outbound,m=h.extractKey,p=200,h=t.db._options.modifyChunkSize;h&&(p=typeof h=="object"?h[u.name]||h["*"]||200:h);function _(y,x){var C=x.failures,x=x.numFailures;w+=y-x;for(var A=0,D=d(C);A<D.length;A++){var I=D[A];f.push(C[I])}}var f=[],w=0,g=[],v=e===_a;return t.clone().primaryKeys().then(function(y){function b(x){var A=Math.min(p,y.length-x),D=y.slice(x,x+A);return(v?Promise.resolve([]):u.getMany({trans:a,keys:D,cache:"immutable"})).then(function(I){var N=[],M=[],k=c?[]:null,T=v?D:[];if(!v)for(var F=0;F<A;++F){var U=I[F],H={value:ct(U),primKey:y[x+F]};l.call(H,H.value,H)!==!1&&(H.value==null?T.push(y[x+F]):c||Q(m(U),m(H.value))===0?(M.push(H.value),c&&k.push(y[x+F])):(T.push(y[x+F]),N.push(H.value)))}return Promise.resolve(0<N.length&&u.mutate({trans:a,type:"add",values:N}).then(function(z){for(var $ in z.failures)T.splice(parseInt($),1);_(N.length,z)})).then(function(){return(0<M.length||C&&typeof e=="object")&&u.mutate({trans:a,type:"put",keys:k,values:M,criteria:C,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<x}).then(function(z){return _(M.length,z)})}).then(function(){return(0<T.length||C&&v)&&u.mutate({trans:a,type:"delete",keys:T,criteria:C,isAdditionalChunk:0<x}).then(function(z){return Jn(i.table,T,z)}).then(function(z){return _(T.length,z)})}).then(function(){return y.length>x+A&&b(x+p)})})}var C=Rt(i)&&i.limit===1/0&&(typeof e!="function"||v)&&{index:i.index,range:i.range};return b(0).then(function(){if(0<f.length)throw new Un("Error modifying one or more objects",f,w,g);return y.length})})})},J.prototype.delete=function(){var e=this._ctx,t=e.range;return!Rt(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(_a):this._write(function(i){var a=e.table.core.schema.primaryKey,l=t;return e.table.core.count({trans:i,query:{index:a,range:l}}).then(function(u){return e.table.core.mutate({trans:i,type:"deleteRange",range:l}).then(function(p){var m=p.failures,p=p.numFailures;if(p)throw new Un("Could not delete some values",Object.keys(m).map(function(h){return m[h]}),u-p);return u-p})})})},J);function J(){}var _a=function(e,t){return t.value=null};function ms(e,t){return e<t?-1:e===t?0:1}function fs(e,t){return t<e?-1:e===t?0:1}function ke(e,t,i){return e=e instanceof wa?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(t),e}function Ut(e){return new e.Collection(e,function(){return ba("")}).limit(0)}function er(e,t,i,a){var l,u,c,m,p,h,_,f=i.length;if(!i.every(function(v){return typeof v=="string"}))return ke(e,ua);function w(v){l=v==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},u=v==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},c=v==="next"?ms:fs;var y=i.map(function(b){return{lower:u(b),upper:l(b)}}).sort(function(b,C){return c(b.lower,C.lower)});m=y.map(function(b){return b.upper}),p=y.map(function(b){return b.lower}),_=(h=v)==="next"?"":a}w("next"),e=new e.Collection(e,function(){return tt(m[0],p[f-1]+a)}),e._ondirectionchange=function(v){w(v)};var g=0;return e._addAlgorithm(function(v,y,b){var C=v.key;if(typeof C!="string")return!1;var x=u(C);if(t(x,p,g))return!0;for(var A=null,D=g;D<f;++D){var I=(function(N,M,k,T,F,U){for(var H=Math.min(N.length,T.length),z=-1,$=0;$<H;++$){var Fe=M[$];if(Fe!==T[$])return F(N[$],k[$])<0?N.substr(0,$)+k[$]+k.substr($+1):F(N[$],T[$])<0?N.substr(0,$)+T[$]+k.substr($+1):0<=z?N.substr(0,z)+M[z]+k.substr(z+1):null;F(N[$],Fe)<0&&(z=$)}return H<T.length&&U==="next"?N+k.substr(N.length):H<N.length&&U==="prev"?N.substr(0,k.length):z<0?null:N.substr(0,z)+T[z]+k.substr(z+1)})(C,x,m[D],p[D],c,h);I===null&&A===null?g=D+1:(A===null||0<c(A,I))&&(A=I)}return y(A!==null?function(){v.continue(A+_)}:b),!1}),e}function tt(e,t,i,a){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:a}}function ba(e){return{type:1,lower:e,upper:e}}var wa=(Object.defineProperty(ge.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ge.prototype.between=function(e,t,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(i||a)&&(!i||!a)?Ut(this):new this.Collection(this,function(){return tt(e,t,!i,!a)})}catch{return ke(this,Ye)}},ge.prototype.equals=function(e){return e==null?ke(this,Ye):new this.Collection(this,function(){return ba(e)})},ge.prototype.above=function(e){return e==null?ke(this,Ye):new this.Collection(this,function(){return tt(e,void 0,!0)})},ge.prototype.aboveOrEqual=function(e){return e==null?ke(this,Ye):new this.Collection(this,function(){return tt(e,void 0,!1)})},ge.prototype.below=function(e){return e==null?ke(this,Ye):new this.Collection(this,function(){return tt(void 0,e,!1,!0)})},ge.prototype.belowOrEqual=function(e){return e==null?ke(this,Ye):new this.Collection(this,function(){return tt(void 0,e)})},ge.prototype.startsWith=function(e){return typeof e!="string"?ke(this,ua):this.between(e,e+yt,!0,!0)},ge.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):er(this,function(t,i){return t.indexOf(i[0])===0},[e],yt)},ge.prototype.equalsIgnoreCase=function(e){return er(this,function(t,i){return t===i[0]},[e],"")},ge.prototype.anyOfIgnoreCase=function(){var e=$e.apply(It,arguments);return e.length===0?Ut(this):er(this,function(t,i){return i.indexOf(t)!==-1},e,"")},ge.prototype.startsWithAnyOfIgnoreCase=function(){var e=$e.apply(It,arguments);return e.length===0?Ut(this):er(this,function(t,i){return i.some(function(a){return t.indexOf(a)===0})},e,yt)},ge.prototype.anyOf=function(){var e=this,t=$e.apply(It,arguments),i=this._cmp;try{t.sort(i)}catch{return ke(this,Ye)}if(t.length===0)return Ut(this);var a=new this.Collection(this,function(){return tt(t[0],t[t.length-1])});a._ondirectionchange=function(u){i=u==="next"?e._ascending:e._descending,t.sort(i)};var l=0;return a._addAlgorithm(function(u,c,m){for(var p=u.key;0<i(p,t[l]);)if(++l===t.length)return c(m),!1;return i(p,t[l])===0||(c(function(){u.continue(t[l])}),!1)}),a},ge.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ge.prototype.noneOf=function(){var e=$e.apply(It,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ke(this,Ye)}var t=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},ge.prototype.inAnyRange=function(C,t){var i=this,a=this._cmp,l=this._ascending,u=this._descending,c=this._min,m=this._max;if(C.length===0)return Ut(this);if(!C.every(function(x){return x[0]!==void 0&&x[1]!==void 0&&l(x[0],x[1])<=0}))return ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",L.InvalidArgument);var p=!t||t.includeLowers!==!1,h=t&&t.includeUppers===!0,_,f=l;function w(x,A){return f(x[0],A[0])}try{(_=C.reduce(function(x,A){for(var D=0,I=x.length;D<I;++D){var N=x[D];if(a(A[0],N[1])<0&&0<a(A[1],N[0])){N[0]=c(N[0],A[0]),N[1]=m(N[1],A[1]);break}}return D===I&&x.push(A),x},[])).sort(w)}catch{return ke(this,Ye)}var g=0,v=h?function(x){return 0<l(x,_[g][1])}:function(x){return 0<=l(x,_[g][1])},y=p?function(x){return 0<u(x,_[g][0])}:function(x){return 0<=u(x,_[g][0])},b=v,C=new this.Collection(this,function(){return tt(_[0][0],_[_.length-1][1],!p,!h)});return C._ondirectionchange=function(x){f=x==="next"?(b=v,l):(b=y,u),_.sort(w)},C._addAlgorithm(function(x,A,D){for(var I,N=x.key;b(N);)if(++g===_.length)return A(D),!1;return!v(I=N)&&!y(I)||(i._cmp(N,_[g][1])===0||i._cmp(N,_[g][0])===0||A(function(){f===l?x.continue(_[g][0]):x.continue(_[g][1])}),!1)}),C},ge.prototype.startsWithAnyOf=function(){var e=$e.apply(It,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Ut(this):this.inAnyRange(e.map(function(t){return[t,t+yt]})):ke(this,"startsWithAnyOf() only works with strings")},ge);function ge(){}function Ke(e){return ae(function(t){return fn(t),e(t.target.error),!1})}function fn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var pn="storagemutated",ii="x-storagemutated-1",nt=dn(null,pn),ps=(qe.prototype._lock=function(){return nn(!B.global),++this._reculock,this._reculock!==1||B.global||(B.lockOwnerFor=this),this},qe.prototype._unlock=function(){if(nn(!B.global),--this._reculock==0)for(B.global||(B.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{vt(e[1],e[0])}catch{}}return this},qe.prototype._locked=function(){return this._reculock&&B.lockOwnerFor!==this},qe.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(nn(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new L.DatabaseClosed(a);case"MissingAPIError":throw new L.MissingAPI(a.message,a);default:throw new L.OpenFailed(a)}if(!this.active)throw new L.TransactionInactive;return nn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ae(function(l){fn(l),t._reject(e.error)}),e.onabort=ae(function(l){fn(l),t.active&&t._reject(new L.Abort(e.error)),t.active=!1,t.on("abort").fire(l)}),e.oncomplete=ae(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&nt.storagemutated.fire(e.mutatedParts)}),this},qe.prototype._promise=function(e,t,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return ce(new L.ReadOnly("Transaction is readonly"));if(!this.active)return ce(new L.TransactionInactive);if(this._locked())return new R(function(u,c){a._blockedFuncs.push([function(){a._promise(e,t,i).then(u,c)},B])});if(i)return Xe(function(){var u=new R(function(c,m){a._lock();var p=t(c,m,a);p&&p.then&&p.then(c,m)});return u.finally(function(){return a._unlock()}),u._lib=!0,u});var l=new R(function(u,c){var m=t(u,c,a);m&&m.then&&m.then(u,c)});return l._lib=!0,l},qe.prototype._root=function(){return this.parent?this.parent._root():this},qe.prototype.waitFor=function(e){var t,i=this._root(),a=R.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],t=i.idbtrans.objectStore(i.storeNames[0]),(function u(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(t.get(-1/0).onsuccess=u)})());var l=i._waitingFor;return new R(function(u,c){a.then(function(m){return i._waitingQueue.push(ae(u.bind(null,m)))},function(m){return i._waitingQueue.push(ae(c.bind(null,m)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new L.Abort))},qe.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(Y(t,e))return t[e];var i=this.schema[e];if(!i)throw new L.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),t[e]=i},qe);function qe(){}function ai(e,t,i,a,l,u,c,m){return{name:e,keyPath:t,unique:i,multi:a,auto:l,compound:u,src:(i&&!c?"&":"")+(a?"*":"")+(l?"++":"")+Ca(t),type:m}}function Ca(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function oi(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:(a=function(l){return[l.name,l]},i.reduce(function(l,u,c){return c=a(u,c),c&&(l[c[0]]=c[1]),l},{}))};var a}var hn=function(e){try{return e.only([[]]),hn=function(){return[[]]},[[]]}catch{return hn=function(){return yt},yt}};function si(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(i){return i[t]}:function(i){return We(i,t)}:function(i){return We(i,e)};var t}function xa(e){return[].slice.call(e)}var hs=0;function gn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function gs(e,t,p){function a(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=b.lower,v=b.upper,y=b.lowerOpen,b=b.upperOpen;return g===void 0?v===void 0?null:t.upperBound(v,!!b):v===void 0?t.lowerBound(g,!!y):t.bound(g,v,!!y,!!b)}function l(w){var g,v=w.name;return{name:v,schema:w,mutate:function(y){var b=y.trans,C=y.type,x=y.keys,A=y.values,D=y.range;return new Promise(function(I,N){I=ae(I);var M=b.objectStore(v),k=M.keyPath==null,T=C==="put"||C==="add";if(!T&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var F,U=(x||A||{length:1}).length;if(x&&A&&x.length!==A.length)throw new Error("Given keys array must have same length as given values array.");if(U===0)return I({numFailures:0,failures:{},results:[],lastResult:void 0});function H(Ee){++Fe,fn(Ee)}var z=[],$=[],Fe=0;if(C==="deleteRange"){if(D.type===4)return I({numFailures:Fe,failures:$,results:[],lastResult:void 0});D.type===3?z.push(F=M.clear()):z.push(F=M.delete(a(D)))}else{var k=T?k?[A,x]:[A,null]:[x,null],G=k[0],we=k[1];if(T)for(var Ce=0;Ce<U;++Ce)z.push(F=we&&we[Ce]!==void 0?M[C](G[Ce],we[Ce]):M[C](G[Ce])),F.onerror=H;else for(Ce=0;Ce<U;++Ce)z.push(F=M[C](G[Ce])),F.onerror=H}function mr(Ee){Ee=Ee.target.result,z.forEach(function(Ct,Ai){return Ct.error!=null&&($[Ai]=Ct.error)}),I({numFailures:Fe,failures:$,results:C==="delete"?x:z.map(function(Ct){return Ct.result}),lastResult:Ee})}F.onerror=function(Ee){H(Ee),mr(Ee)},F.onsuccess=mr})},getMany:function(y){var b=y.trans,C=y.keys;return new Promise(function(x,A){x=ae(x);for(var D,I=b.objectStore(v),N=C.length,M=new Array(N),k=0,T=0,F=function(z){z=z.target,M[z._pos]=z.result,++T===k&&x(M)},U=Ke(A),H=0;H<N;++H)C[H]!=null&&((D=I.get(C[H]))._pos=H,D.onsuccess=F,D.onerror=U,++k);k===0&&x(M)})},get:function(y){var b=y.trans,C=y.key;return new Promise(function(x,A){x=ae(x);var D=b.objectStore(v).get(C);D.onsuccess=function(I){return x(I.target.result)},D.onerror=Ke(A)})},query:(g=h,function(y){return new Promise(function(b,C){b=ae(b);var x,A,D,k=y.trans,I=y.values,N=y.limit,F=y.query,M=N===1/0?void 0:N,T=F.index,F=F.range,k=k.objectStore(v),T=T.isPrimaryKey?k:k.index(T.name),F=a(F);if(N===0)return b({result:[]});g?((M=I?T.getAll(F,M):T.getAllKeys(F,M)).onsuccess=function(U){return b({result:U.target.result})},M.onerror=Ke(C)):(x=0,A=!I&&"openKeyCursor"in T?T.openKeyCursor(F):T.openCursor(F),D=[],A.onsuccess=function(U){var H=A.result;return H?(D.push(I?H.value:H.primaryKey),++x===N?b({result:D}):void H.continue()):b({result:D})},A.onerror=Ke(C))})}),openCursor:function(y){var b=y.trans,C=y.values,x=y.query,A=y.reverse,D=y.unique;return new Promise(function(I,N){I=ae(I);var T=x.index,M=x.range,k=b.objectStore(v),k=T.isPrimaryKey?k:k.index(T.name),T=A?D?"prevunique":"prev":D?"nextunique":"next",F=!C&&"openKeyCursor"in k?k.openKeyCursor(a(M),T):k.openCursor(a(M),T);F.onerror=Ke(N),F.onsuccess=ae(function(U){var H,z,$,Fe,G=F.result;G?(G.___id=++hs,G.done=!1,H=G.continue.bind(G),z=(z=G.continuePrimaryKey)&&z.bind(G),$=G.advance.bind(G),Fe=function(){throw new Error("Cursor not stopped")},G.trans=b,G.stop=G.continue=G.continuePrimaryKey=G.advance=function(){throw new Error("Cursor not started")},G.fail=ae(N),G.next=function(){var we=this,Ce=1;return this.start(function(){return Ce--?we.continue():we.stop()}).then(function(){return we})},G.start=function(we){function Ce(){if(F.result)try{we()}catch(Ee){G.fail(Ee)}else G.done=!0,G.start=function(){throw new Error("Cursor behind last entry")},G.stop()}var mr=new Promise(function(Ee,Ct){Ee=ae(Ee),F.onerror=Ke(Ct),G.fail=Ct,G.stop=function(Ai){G.stop=G.continue=G.continuePrimaryKey=G.advance=Fe,Ee(Ai)}});return F.onsuccess=ae(function(Ee){F.onsuccess=Ce,Ce()}),G.continue=H,G.continuePrimaryKey=z,G.advance=$,Ce(),mr},I(G)):I(null)},N)})},count:function(y){var b=y.query,C=y.trans,x=b.index,A=b.range;return new Promise(function(D,I){var N=C.objectStore(v),M=x.isPrimaryKey?N:N.index(x.name),N=a(A),M=N?M.count(N):M.count();M.onsuccess=ae(function(k){return D(k.target.result)}),M.onerror=Ke(I)})}}}var u,c,m,_=(c=p,m=xa((u=e).objectStoreNames),{schema:{name:u.name,tables:m.map(function(w){return c.objectStore(w)}).map(function(w){var g=w.keyPath,b=w.autoIncrement,v=E(g),y={},b={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:v,keyPath:g,autoIncrement:b,unique:!0,extractKey:si(g)},indexes:xa(w.indexNames).map(function(C){return w.index(C)}).map(function(D){var x=D.name,A=D.unique,I=D.multiEntry,D=D.keyPath,I={name:x,compound:E(D),keyPath:D,unique:A,multiEntry:I,extractKey:si(D)};return y[gn(D)]=I}),getIndexByKeyPath:function(C){return y[gn(C)]}};return y[":id"]=b.primaryKey,g!=null&&(y[gn(g)]=b.primaryKey),b})},hasGetAll:0<m.length&&"getAll"in c.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),p=_.schema,h=_.hasGetAll,_=p.tables.map(l),f={};return _.forEach(function(w){return f[w.name]=w}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(w){if(!f[w])throw new Error("Table '".concat(w,"' not found"));return f[w]},MIN_KEY:-1/0,MAX_KEY:hn(t),schema:p}}function vs(e,t,i,a){var l=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=gs(t,l,a),e.dbcore.reduce(function(u,c){return c=c.create,r(r({},u),c(u))},a))}}function tr(e,a){var i=a.db,a=vs(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(l){var u=l.name;e.core.schema.tables.some(function(c){return c.name===u})&&(l.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=l.core))})}function nr(e,t,i,a){i.forEach(function(l){var u=a[l];t.forEach(function(c){var m=(function p(h,_){return tn(h,_)||(h=W(h))&&p(h,_)})(c,l);(!m||"value"in m&&m.value===void 0)&&(c===e.Transaction.prototype||c instanceof e.Transaction?Pe(c,l,{get:function(){return this.table(l)},set:function(p){ze(this,l,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):c[l]=new e.Table(l,u))})})}function li(e,t){t.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function ys(e,t){return e._cfg.version-t._cfg.version}function _s(e,t,i,a){var l=e._dbSchema;i.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=oi("$meta",Aa("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,l);u.create(i),u._completion.catch(a);var c=u._reject.bind(u),m=B.transless||B;Xe(function(){return B.trans=u,B.transless=m,t!==0?(tr(e,i),h=t,((p=u).storeNames.includes("$meta")?p.table("$meta").get("version").then(function(_){return _??h}):R.resolve(h)).then(function(_){return w=_,g=u,v=i,y=[],_=(f=e)._versions,b=f._dbSchema=ir(0,f.idbdb,v),(_=_.filter(function(C){return C._cfg.version>=w})).length!==0?(_.forEach(function(C){y.push(function(){var x=b,A=C._cfg.dbschema;ar(f,x,v),ar(f,A,v),b=f._dbSchema=A;var D=ui(x,A);D.add.forEach(function(T){ci(v,T[0],T[1].primKey,T[1].indexes)}),D.change.forEach(function(T){if(T.recreate)throw new L.Upgrade("Not yet support for changing primary key");var F=v.objectStore(T.name);T.add.forEach(function(U){return rr(F,U)}),T.change.forEach(function(U){F.deleteIndex(U.name),rr(F,U)}),T.del.forEach(function(U){return F.deleteIndex(U)})});var I=C._cfg.contentUpgrade;if(I&&C._cfg.version>w){tr(f,v),g._memoizedTables={};var N=Xi(A);D.del.forEach(function(T){N[T]=x[T]}),li(f,[f.Transaction.prototype]),nr(f,[f.Transaction.prototype],d(N),N),g.schema=N;var M,k=qr(I);return k&&Tt(),D=R.follow(function(){var T;(M=I(g))&&k&&(T=Ze.bind(null,null),M.then(T,T))}),M&&typeof M.then=="function"?R.resolve(M):D.then(function(){return M})}}),y.push(function(x){var A,D,I=C._cfg.dbschema;A=I,D=x,[].slice.call(D.db.objectStoreNames).forEach(function(N){return A[N]==null&&D.db.deleteObjectStore(N)}),li(f,[f.Transaction.prototype]),nr(f,[f.Transaction.prototype],f._storeNames,f._dbSchema),g.schema=f._dbSchema}),y.push(function(x){f.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(f.idbdb.version/10)===C._cfg.version?(f.idbdb.deleteObjectStore("$meta"),delete f._dbSchema.$meta,f._storeNames=f._storeNames.filter(function(A){return A!=="$meta"})):x.objectStore("$meta").put(C._cfg.version,"version"))})}),(function C(){return y.length?R.resolve(y.shift()(g.idbtrans)).then(C):R.resolve()})().then(function(){Ea(b,v)})):R.resolve();var f,w,g,v,y,b}).catch(c)):(d(l).forEach(function(_){ci(i,_,l[_].primKey,l[_].indexes)}),tr(e,i),void R.follow(function(){return e.on.populate.fire(u)}).catch(c));var p,h})}function bs(e,t){Ea(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=ir(0,e.idbdb,t);ar(e,e._dbSchema,t);for(var a=0,l=ui(i,e._dbSchema).change;a<l.length;a++){var u=(function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var m=t.objectStore(c.name);c.add.forEach(function(p){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(p.src)),rr(m,p)})})(l[a]);if(typeof u=="object")return u.value}}function ui(e,t){var i,a={del:[],add:[],change:[]};for(i in e)t[i]||a.del.push(i);for(i in t){var l=e[i],u=t[i];if(l){var c={name:i,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||l.primKey.auto!==u.primKey.auto)c.recreate=!0,a.change.push(c);else{var m=l.idxByName,p=u.idxByName,h=void 0;for(h in m)p[h]||c.del.push(h);for(h in p){var _=m[h],f=p[h];_?_.src!==f.src&&c.change.push(f):c.add.push(f)}(0<c.del.length||0<c.add.length||0<c.change.length)&&a.change.push(c)}}else a.add.push([i,u])}return a}function ci(e,t,i,a){var l=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(u){return rr(l,u)}),l}function Ea(e,t){d(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(Le&&console.debug("Dexie: Creating missing table",i),ci(t,i,e[i].primKey,e[i].indexes))})}function rr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ir(e,t,i){var a={};return Pt(t.objectStoreNames,0).forEach(function(l){for(var u=i.objectStore(l),c=ai(Ca(h=u.keyPath),h||"",!0,!1,!!u.autoIncrement,h&&typeof h!="string",!0),m=[],p=0;p<u.indexNames.length;++p){var _=u.index(u.indexNames[p]),h=_.keyPath,_=ai(_.name,h,!!_.unique,!!_.multiEntry,!1,h&&typeof h!="string",!1);m.push(_)}a[l]=oi(l,c,m)}),a}function ar(e,t,i){for(var a=i.db.objectStoreNames,l=0;l<a.length;++l){var u=a[l],c=i.objectStore(u);e._hasGetAll="getAll"in c;for(var m=0;m<c.indexNames.length;++m){var p=c.indexNames[m],h=c.index(p).keyPath,_=typeof h=="string"?h:"["+Pt(h).join("+")+"]";!t[u]||(h=t[u].idxByName[_])&&(h.name=p,delete t[u].idxByName[_],t[u].idxByName[p]=h)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Aa(e){return e.split(",").map(function(t,i){var u=t.split(":"),a=(l=u[1])===null||l===void 0?void 0:l.trim(),l=(t=u[0].trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return ai(l,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),E(u),i===0,a)})}var ws=(Bt.prototype._createTableSchema=oi,Bt.prototype._parseIndexSyntax=Aa,Bt.prototype._parseStoresSpec=function(e,t){var i=this;d(e).forEach(function(a){if(e[a]!==null){var l=i._parseIndexSyntax(e[a]),u=l.shift();if(!u)throw new L.Schema("Invalid schema for table "+a+": "+e[a]);if(u.unique=!0,u.multi)throw new L.Schema("Primary key cannot be multiEntry*");l.forEach(function(c){if(c.auto)throw new L.Schema("Only primary key can be marked as autoIncrement (++)");if(!c.keyPath)throw new L.Schema("Index must have a name and cannot be an empty string")}),l=i._createTableSchema(a,u,l),t[a]=l}})},Bt.prototype.stores=function(i){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?O(this._cfg.storesSource,i):i;var i=t._versions,a={},l={};return i.forEach(function(u){O(a,u._cfg.storesSource),l=u._cfg.dbschema={},u._parseStoresSpec(a,l)}),t._dbSchema=l,li(t,[t._allTables,t,t.Transaction.prototype]),nr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],d(l),l),t._storeNames=d(l),this},Bt.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Hr(this._cfg.contentUpgrade||te,e),this},Bt);function Bt(){}function di(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Qe(Yn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function mi(e){return e&&typeof e.databases=="function"}function fi(e){return Xe(function(){return B.letThrough=!0,e()})}function pi(e){return!("from"in e)}var be=function(e,t){if(!this){var i=new be;return e&&"d"in e&&O(i,e),i}O(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function vn(e,t,i){var a=Q(t,i);if(!isNaN(a)){if(0<a)throw RangeError();if(pi(e))return O(e,{from:t,to:i,d:1});var l=e.l,a=e.r;if(Q(i,e.from)<0)return l?vn(l,t,i):e.l={from:t,to:i,d:1,l:null,r:null},Sa(e);if(0<Q(t,e.to))return a?vn(a,t,i):e.r={from:t,to:i,d:1,l:null,r:null},Sa(e);Q(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),0<Q(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,l&&!e.l&&yn(e,l),a&&i&&yn(e,a)}}function yn(e,t){pi(t)||(function i(a,p){var u=p.from,c=p.to,m=p.l,p=p.r;vn(a,u,c),m&&i(a,m),p&&i(a,p)})(e,t)}function Da(e,t){var i=or(t),a=i.next();if(a.done)return!1;for(var l=a.value,u=or(e),c=u.next(l.from),m=c.value;!a.done&&!c.done;){if(Q(m.from,l.to)<=0&&0<=Q(m.to,l.from))return!0;Q(l.from,m.from)<0?l=(a=i.next(m.from)).value:m=(c=u.next(l.from)).value}return!1}function or(e){var t=pi(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&Q(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||Q(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sa(e){var t,i,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),l=1<a?"r":a<-1?"l":"";l&&(t=l=="r"?"l":"r",i=r({},e),a=e[l],e.from=a.from,e.to=a.to,e[l]=a[l],i[l]=a[t],(e[t]=i).d=Va(i)),e.d=Va(e)}function Va(i){var t=i.r,i=i.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function sr(e,t){return d(t).forEach(function(i){e[i]?yn(e[i],t[i]):e[i]=(function a(l){var u,c,m={};for(u in l)Y(l,u)&&(c=l[u],m[u]=!c||typeof c!="object"||ea.has(c.constructor)?c:a(c));return m})(t[i])}),e}function hi(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&Da(t[i],e[i])})}ue(be.prototype,((Te={add:function(e){return yn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return vn(t,i,i)}),this},hasKey:function(e){var t=or(this).next(e).value;return t&&Q(t.from,e)<=0&&0<=Q(t.to,e)}})[Kr]=function(){return or(this)},Te));var bt={},gi={},vi=!1;function lr(e){sr(gi,e),vi||(vi=!0,setTimeout(function(){vi=!1,yi(gi,!(gi={}))},0))}function yi(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var a=0,l=Object.values(bt);a<l.length;a++)Ma(c=l[a],e,i,t);else for(var u in e){var c,m=/^idb\:\/\/(.*)\/(.*)\//.exec(u);m&&(u=m[1],m=m[2],(c=bt["idb://".concat(u,"/").concat(m)])&&Ma(c,e,i,t))}i.forEach(function(p){return p()})}function Ma(e,t,i,a){for(var l=[],u=0,c=Object.entries(e.queries.query);u<c.length;u++){for(var m=c[u],p=m[0],h=[],_=0,f=m[1];_<f.length;_++){var w=f[_];hi(t,w.obsSet)?w.subscribers.forEach(function(b){return i.add(b)}):a&&h.push(w)}a&&l.push([p,h])}if(a)for(var g=0,v=l;g<v.length;g++){var y=v[g],p=y[0],h=y[1];e.queries.query[p]=h}}function Cs(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ce(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,l=Math.round(10*e.verno),u=!1;function c(){if(t.openCanceller!==a)throw new L.DatabaseClosed("db.open() was cancelled")}function m(){return new R(function(w,g){if(c(),!i)throw new L.MissingAPI;var v=e.name,y=t.autoSchema||!l?i.open(v):i.open(v,l);if(!y)throw new L.MissingAPI;y.onerror=Ke(g),y.onblocked=ae(e._fireOnBlocked),y.onupgradeneeded=ae(function(b){var C;_=y.transaction,t.autoSchema&&!e._options.allowEmptyDB?(y.onerror=fn,_.abort(),y.result.close(),(C=i.deleteDatabase(v)).onsuccess=C.onerror=ae(function(){g(new L.NoSuchDatabase("Database ".concat(v," doesnt exist")))})):(_.onerror=Ke(g),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,f=b<1,e.idbdb=y.result,u&&bs(e,_),_s(e,b/10,_,g))},g),y.onsuccess=ae(function(){_=null;var b,C,x,A,D,I=e.idbdb=y.result,N=Pt(I.objectStoreNames);if(0<N.length)try{var M=I.transaction((A=N).length===1?A[0]:A,"readonly");if(t.autoSchema)C=I,x=M,(b=e).verno=C.version/10,x=b._dbSchema=ir(0,C,x),b._storeNames=Pt(C.objectStoreNames,0),nr(b,[b._allTables],d(x),x);else if(ar(e,e._dbSchema,M),((D=ui(ir(0,(D=e).idbdb,M),D._dbSchema)).add.length||D.change.some(function(k){return k.add.length||k.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),I.close(),l=I.version+1,u=!0,w(m());tr(e,M)}catch{}jt.push(e),I.onversionchange=ae(function(k){t.vcFired=!0,e.on("versionchange").fire(k)}),I.onclose=ae(function(){e.close({disableAutoOpen:!1})}),f&&(D=e._deps,M=v,I=D.indexedDB,D=D.IDBKeyRange,mi(I)||M===Yn||di(I,D).put({name:M}).catch(te)),w()},g)}).catch(function(w){switch(w?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),m();break;case"VersionError":if(0<l)return l=0,m()}return R.reject(w)})}var p,h=t.dbReadyResolve,_=null,f=!1;return R.race([a,(typeof navigator>"u"?R.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(w){function g(){return indexedDB.databases().finally(w)}p=setInterval(g,100),g()}).finally(function(){return clearInterval(p)}):Promise.resolve()).then(m)]).then(function(){return c(),t.onReadyBeingFired=[],R.resolve(fi(function(){return e.on.ready.fire(e.vip)})).then(function w(){if(0<t.onReadyBeingFired.length){var g=t.onReadyBeingFired.reduce(Hr,te);return t.onReadyBeingFired=[],R.resolve(fi(function(){return g(e.vip)})).then(w)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(w){t.dbOpenError=w;try{_&&_.abort()}catch{}return a===t.openCanceller&&e._close(),ce(w)}).finally(function(){t.openComplete=!0,h()}).then(function(){var w;return f&&(w={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(v){v.name&&(w["idb://".concat(e.name,"/").concat(g.name,"/").concat(v.name)]=new be(-1/0,[[[]]]))}),w["idb://".concat(e.name,"/").concat(g.name,"/")]=w["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new be(-1/0,[[[]]])}),nt(pn).fire(w),yi(w,!0)),e})}function _i(e){function t(u){return e.next(u)}var i=l(t),a=l(function(u){return e.throw(u)});function l(u){return function(p){var m=u(p),p=m.value;return m.done?p:p&&typeof p.then=="function"?p.then(i,a):E(p)?Promise.all(p).then(i,a):i(p)}}return l(t)()}function ur(e,t,i){for(var a=E(e)?e.slice():[e],l=0;l<i;++l)a.push(t);return a}var xs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var i=e.table(t),a=i.schema,l={},u=[];function c(f,w,g){var v=gn(f),y=l[v]=l[v]||[],b=f==null?0:typeof f=="string"?1:f.length,C=0<w,C=r(r({},g),{name:C?"".concat(v,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:C,keyTail:w,keyLength:b,extractKey:si(f),unique:!C&&g.unique});return y.push(C),C.isPrimaryKey||u.push(C),1<b&&c(b===2?f[0]:f.slice(0,b-1),w+1,g),y.sort(function(x,A){return x.keyTail-A.keyTail}),C}t=c(a.primaryKey.keyPath,0,a.primaryKey),l[":id"]=[t];for(var m=0,p=a.indexes;m<p.length;m++){var h=p[m];c(h.keyPath,0,h)}function _(f){var w,g=f.query.index;return g.isVirtual?r(r({},f),{query:{index:g.lowLevelIndex,range:(w=f.query.range,g=g.keyTail,{type:w.type===1?2:w.type,lower:ur(w.lower,w.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:ur(w.upper,w.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):f}return r(r({},i),{schema:r(r({},a),{primaryKey:t,indexes:u,getIndexByKeyPath:function(f){return(f=l[gn(f)])&&f[0]}}),count:function(f){return i.count(_(f))},query:function(f){return i.query(_(f))},openCursor:function(f){var w=f.query.index,g=w.keyTail,v=w.isVirtual,y=w.keyLength;return v?i.openCursor(_(f)).then(function(C){return C&&b(C)}):i.openCursor(f);function b(C){return Object.create(C,{continue:{value:function(x){x!=null?C.continue(ur(x,f.reverse?e.MAX_KEY:e.MIN_KEY,g)):f.unique?C.continue(C.key.slice(0,y).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,g)):C.continue()}},continuePrimaryKey:{value:function(x,A){C.continuePrimaryKey(ur(x,e.MAX_KEY,g),A)}},primaryKey:{get:function(){return C.primaryKey}},key:{get:function(){var x=C.key;return y===1?x[0]:x.slice(0,y)}},value:{get:function(){return C.value}}})}}})}})}};function bi(e,t,i,a){return i=i||{},a=a||"",d(e).forEach(function(l){var u,c,m;Y(t,l)?(u=e[l],c=t[l],typeof u=="object"&&typeof c=="object"&&u&&c?(m=Lr(u))!==Lr(c)?i[a+l]=t[l]:m==="Object"?bi(u,c,i,a+l+"."):u!==c&&(i[a+l]=t[l]):u!==c&&(i[a+l]=t[l])):i[a+l]=void 0}),d(t).forEach(function(l){Y(e,l)||(i[a+l]=t[l])}),i}function wi(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Es={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var i=e.table(t),a=i.schema.primaryKey;return r(r({},i),{mutate:function(l){var u=B.trans,c=u.table(t).hook,m=c.deleting,p=c.creating,h=c.updating;switch(l.type){case"add":if(p.fire===te)break;return u._promise("readwrite",function(){return _(l)},!0);case"put":if(p.fire===te&&h.fire===te)break;return u._promise("readwrite",function(){return _(l)},!0);case"delete":if(m.fire===te)break;return u._promise("readwrite",function(){return _(l)},!0);case"deleteRange":if(m.fire===te)break;return u._promise("readwrite",function(){return(function f(w,g,v){return i.query({trans:w,values:!1,query:{index:a,range:g},limit:v}).then(function(y){var b=y.result;return _({type:"delete",keys:b,trans:w}).then(function(C){return 0<C.numFailures?Promise.reject(C.failures[0]):b.length<v?{failures:[],numFailures:0,lastResult:void 0}:f(w,r(r({},g),{lower:b[b.length-1],lowerOpen:!0}),v)})})})(l.trans,l.range,1e4)},!0)}return i.mutate(l);function _(f){var w,g,v,y=B.trans,b=f.keys||wi(a,f);if(!b)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?r(r({},f),{keys:b}):r({},f)).type!=="delete"&&(f.values=n([],f.values,!0)),f.keys&&(f.keys=n([],f.keys,!0)),w=i,v=b,((g=f).type==="add"?Promise.resolve([]):w.getMany({trans:g.trans,keys:v,cache:"immutable"})).then(function(C){var x=b.map(function(A,D){var I,N,M,k=C[D],T={onerror:null,onsuccess:null};return f.type==="delete"?m.fire.call(T,A,k,y):f.type==="add"||k===void 0?(I=p.fire.call(T,A,f.values[D],y),A==null&&I!=null&&(f.keys[D]=A=I,a.outbound||Ae(f.values[D],a.keyPath,A))):(I=bi(k,f.values[D]),(N=h.fire.call(T,I,A,k,y))&&(M=f.values[D],Object.keys(N).forEach(function(F){Y(M,F)?M[F]=N[F]:Ae(M,F,N[F])}))),T});return i.mutate(f).then(function(A){for(var D=A.failures,I=A.results,N=A.numFailures,A=A.lastResult,M=0;M<b.length;++M){var k=(I||b)[M],T=x[M];k==null?T.onerror&&T.onerror(D[M]):T.onsuccess&&T.onsuccess(f.type==="put"&&C[M]?f.values[M]:k)}return{failures:D,results:I,numFailures:N,lastResult:A}}).catch(function(A){return x.forEach(function(D){return D.onerror&&D.onerror(A)}),Promise.reject(A)})})}}})}})}};function Pa(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var a=[],l=0,u=0;l<t.keys.length&&u<e.length;++l)Q(t.keys[l],e[u])===0&&(a.push(i?ct(t.values[l]):t.values[l]),++u);return a.length===e.length?a:null}catch{return null}}var As={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return r(r({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var l=Pa(a.keys,a.trans._cache,a.cache==="clone");return l?R.resolve(l):i.getMany(a).then(function(u){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?ct(u):u},u})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function Ia(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function ka(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ds={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new be(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(a,l,u){if(B.subscr&&l!=="readonly")throw new L.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(B.querier));return e.transaction(a,l,u)},table:function(a){var l=e.table(a),u=l.schema,c=u.primaryKey,f=u.indexes,m=c.extractKey,p=c.outbound,h=c.autoIncrement&&f.filter(function(g){return g.compound&&g.keyPath.includes(c.keyPath)}),_=r(r({},l),{mutate:function(g){function v(F){return F="idb://".concat(t,"/").concat(a,"/").concat(F),A[F]||(A[F]=new be)}var y,b,C,x=g.trans,A=g.mutatedParts||(g.mutatedParts={}),D=v(""),I=v(":dels"),N=g.type,T=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[wi(c,g).filter(function(F){return F}),g.values]:[],M=T[0],k=T[1],T=g.trans._cache;return E(M)?(D.addKeys(M),(T=N==="delete"||M.length===k.length?Pa(M,T):null)||I.addKeys(M),(T||k)&&(y=v,b=T,C=k,u.indexes.forEach(function(F){var U=y(F.name||"");function H($){return $!=null?F.extractKey($):null}function z($){return F.multiEntry&&E($)?$.forEach(function(Fe){return U.addKey(Fe)}):U.addKey($)}(b||C).forEach(function($,we){var G=b&&H(b[we]),we=C&&H(C[we]);Q(G,we)!==0&&(G!=null&&z(G),we!=null&&z(we))})}))):M?(k={from:(k=M.lower)!==null&&k!==void 0?k:e.MIN_KEY,to:(k=M.upper)!==null&&k!==void 0?k:e.MAX_KEY},I.add(k),D.add(k)):(D.add(i),I.add(i),u.indexes.forEach(function(F){return v(F.name).add(i)})),l.mutate(g).then(function(F){return!M||g.type!=="add"&&g.type!=="put"||(D.addKeys(F.results),h&&h.forEach(function(U){for(var H=g.values.map(function(G){return U.extractKey(G)}),z=U.keyPath.findIndex(function(G){return G===c.keyPath}),$=0,Fe=F.results.length;$<Fe;++$)H[$][z]=F.results[$];v(U.name).addKeys(H)})),x.mutatedParts=sr(x.mutatedParts||{},A),F})}}),f=function(v){var y=v.query,v=y.index,y=y.range;return[v,new be((v=y.lower)!==null&&v!==void 0?v:e.MIN_KEY,(y=y.upper)!==null&&y!==void 0?y:e.MAX_KEY)]},w={get:function(g){return[c,new be(g.key)]},getMany:function(g){return[c,new be().addKeys(g.keys)]},count:f,query:f,openCursor:f};return d(w).forEach(function(g){_[g]=function(v){var y=B.subscr,b=!!y,C=Ia(B,l)&&ka(g,v)?v.obsSet={}:y;if(b){var x=function(k){return k="idb://".concat(t,"/").concat(a,"/").concat(k),C[k]||(C[k]=new be)},A=x(""),D=x(":dels"),y=w[g](v),b=y[0],y=y[1];if((g==="query"&&b.isPrimaryKey&&!v.values?D:x(b.name||"")).add(y),!b.isPrimaryKey){if(g!=="count"){var I=g==="query"&&p&&v.values&&l.query(r(r({},v),{values:!1}));return l[g].apply(this,arguments).then(function(k){if(g==="query"){if(p&&v.values)return I.then(function(H){return H=H.result,A.addKeys(H),k});var T=v.values?k.result.map(m):k.result;(v.values?A:D).addKeys(T)}else if(g==="openCursor"){var F=k,U=v.values;return F&&Object.create(F,{key:{get:function(){return D.addKey(F.primaryKey),F.key}},primaryKey:{get:function(){var H=F.primaryKey;return D.addKey(H),H}},value:{get:function(){return U&&A.addKey(F.primaryKey),F.value}}})}return k})}D.add(i)}}return l[g].apply(this,arguments)}}),_}})}};function Fa(e,t,i){if(i.numFailures===0)return t;if(t.type==="deleteRange")return null;var a=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return i.numFailures===a?null:(t=r({},t),E(t.keys)&&(t.keys=t.keys.filter(function(l,u){return!(u in i.failures)})),"values"in t&&E(t.values)&&(t.values=t.values.filter(function(l,u){return!(u in i.failures)})),t)}function Ci(e,t){return i=e,((a=t).lower===void 0||(a.lowerOpen?0<Q(i,a.lower):0<=Q(i,a.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Q(e,t.upper)<0:Q(e,t.upper)<=0));var i,a}function Oa(e,t,w,a,l,u){if(!w||w.length===0)return e;var c=t.query.index,m=c.multiEntry,p=t.query.range,h=a.schema.primaryKey.extractKey,_=c.extractKey,f=(c.lowLevelIndex||c).extractKey,w=w.reduce(function(g,v){var y=g,b=[];if(v.type==="add"||v.type==="put")for(var C=new be,x=v.values.length-1;0<=x;--x){var A,D=v.values[x],I=h(D);C.hasKey(I)||(A=_(D),(m&&E(A)?A.some(function(F){return Ci(F,p)}):Ci(A,p))&&(C.addKey(I),b.push(D)))}switch(v.type){case"add":var N=new be().addKeys(t.values?g.map(function(U){return h(U)}):g),y=g.concat(t.values?b.filter(function(U){return U=h(U),!N.hasKey(U)&&(N.addKey(U),!0)}):b.map(function(U){return h(U)}).filter(function(U){return!N.hasKey(U)&&(N.addKey(U),!0)}));break;case"put":var M=new be().addKeys(v.values.map(function(U){return h(U)}));y=g.filter(function(U){return!M.hasKey(t.values?h(U):U)}).concat(t.values?b:b.map(function(U){return h(U)}));break;case"delete":var k=new be().addKeys(v.keys);y=g.filter(function(U){return!k.hasKey(t.values?h(U):U)});break;case"deleteRange":var T=v.range;y=g.filter(function(U){return!Ci(h(U),T)})}return y},e);return w===e?e:(w.sort(function(g,v){return Q(f(g),f(v))||Q(h(g),h(v))}),t.limit&&t.limit<1/0&&(w.length>t.limit?w.length=t.limit:e.length===t.limit&&w.length<t.limit&&(l.dirty=!0)),u?Object.freeze(w):w)}function Na(e,t){return Q(e.lower,t.lower)===0&&Q(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ss(e,t){return(function(i,a,l,u){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Q(i,a))===0){if(l&&u)return 0;if(l)return 1;if(u)return-1}return a})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=(function(i,a,l,u){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Q(i,a))===0){if(l&&u)return 0;if(l)return-1;if(u)return 1}return a})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Vs(e,t,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var l,u;e.subscribers.delete(i),e.subscribers.size===0&&(l=e,u=t,setTimeout(function(){l.subscribers.size===0&&dt(u,l)},3e3))})}var Ms={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return r(r({},e),{transaction:function(i,a,l){var u,c,m=e.transaction(i,a,l);return a==="readwrite"&&(c=(u=new AbortController).signal,l=function(p){return function(){if(u.abort(),a==="readwrite"){for(var h=new Set,_=0,f=i;_<f.length;_++){var w=f[_],g=bt["idb://".concat(t,"/").concat(w)];if(g){var v=e.table(w),y=g.optimisticOps.filter(function(U){return U.trans===m});if(m._explicit&&p&&m.mutatedParts)for(var b=0,C=Object.values(g.queries.query);b<C.length;b++)for(var x=0,A=(N=C[b]).slice();x<A.length;x++)hi((M=A[x]).obsSet,m.mutatedParts)&&(dt(N,M),M.subscribers.forEach(function(U){return h.add(U)}));else if(0<y.length){g.optimisticOps=g.optimisticOps.filter(function(U){return U.trans!==m});for(var D=0,I=Object.values(g.queries.query);D<I.length;D++)for(var N,M,k,T=0,F=(N=I[D]).slice();T<F.length;T++)(M=F[T]).res!=null&&m.mutatedParts&&(p&&!M.dirty?(k=Object.isFrozen(M.res),k=Oa(M.res,M.req,y,v,M,k),M.dirty?(dt(N,M),M.subscribers.forEach(function(U){return h.add(U)})):k!==M.res&&(M.res=k,M.promise=R.resolve({result:k}))):(M.dirty&&dt(N,M),M.subscribers.forEach(function(U){return h.add(U)})))}}}h.forEach(function(U){return U()})}}},m.addEventListener("abort",l(!1),{signal:c}),m.addEventListener("error",l(!1),{signal:c}),m.addEventListener("complete",l(!0),{signal:c})),m},table:function(i){var a=e.table(i),l=a.schema.primaryKey;return r(r({},a),{mutate:function(u){var c=B.trans;if(l.outbound||c.db._options.cache==="disabled"||c.explicit||c.idbtrans.mode!=="readwrite")return a.mutate(u);var m=bt["idb://".concat(t,"/").concat(i)];return m?(c=a.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||wi(l,u).some(function(p){return p==null}))?(m.optimisticOps.push(u),u.mutatedParts&&lr(u.mutatedParts),c.then(function(p){0<p.numFailures&&(dt(m.optimisticOps,u),(p=Fa(0,u,p))&&m.optimisticOps.push(p),u.mutatedParts&&lr(u.mutatedParts))}),c.catch(function(){dt(m.optimisticOps,u),u.mutatedParts&&lr(u.mutatedParts)})):c.then(function(p){var h=Fa(0,r(r({},u),{values:u.values.map(function(_,f){var w;return p.failures[f]?_:(_=(w=l.keyPath)!==null&&w!==void 0&&w.includes(".")?ct(_):r({},_),Ae(_,l.keyPath,p.results[f]),_)})}),p);m.optimisticOps.push(h),queueMicrotask(function(){return u.mutatedParts&&lr(u.mutatedParts)})}),c):a.mutate(u)},query:function(u){if(!Ia(B,a)||!ka("query",u))return a.query(u);var c=((h=B.trans)===null||h===void 0?void 0:h.db._options.cache)==="immutable",f=B,m=f.requery,p=f.signal,h=(function(v,y,b,C){var x=bt["idb://".concat(v,"/").concat(y)];if(!x)return[];if(!(y=x.queries[b]))return[null,!1,x,null];var A=y[(C.query?C.query.index.name:null)||""];if(!A)return[null,!1,x,null];switch(b){case"query":var D=A.find(function(I){return I.req.limit===C.limit&&I.req.values===C.values&&Na(I.req.query.range,C.query.range)});return D?[D,!0,x,A]:[A.find(function(I){return("limit"in I.req?I.req.limit:1/0)>=C.limit&&(!C.values||I.req.values)&&Ss(I.req.query.range,C.query.range)}),!1,x,A];case"count":return D=A.find(function(I){return Na(I.req.query.range,C.query.range)}),[D,!!D,x,A]}})(t,i,"query",u),_=h[0],f=h[1],w=h[2],g=h[3];return _&&f?_.obsSet=u.obsSet:(f=a.query(u).then(function(v){var y=v.result;if(_&&(_.res=y),c){for(var b=0,C=y.length;b<C;++b)Object.freeze(y[b]);Object.freeze(y)}else v.result=ct(y);return v}).catch(function(v){return g&&_&&dt(g,_),Promise.reject(v)}),_={obsSet:u.obsSet,promise:f,subscribers:new Set,type:"query",req:u,dirty:!1},g?g.push(_):(g=[_],(w=w||(bt["idb://".concat(t,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=g)),Vs(_,g,m,p),_.promise.then(function(v){return{result:Oa(v.result,u,w?.optimisticOps,a,_,c)}})}})}})}};function cr(e,t){return new Proxy(e,{get:function(i,a,l){return a==="db"?t:Reflect.get(i,a,l)}})}var Qe=(de.prototype.version=function(e){if(isNaN(e)||e<.1)throw new L.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new L.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),t.push(i),t.sort(ys),i.stores({}),this._state.autoSchema=!1,i)},de.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||B.letThrough||this._vip)?e():new R(function(i,a){if(t._state.openComplete)return a(new L.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void a(new L.DatabaseClosed);t.open().catch(te)}t._state.dbReadyPromise.then(i,a)}).then(e)},de.prototype.use=function(e){var t=e.stack,i=e.create,a=e.level,l=e.name;return l&&this.unuse({stack:t,name:l}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:i,level:a??10,name:l}),e.sort(function(u,c){return u.level-c.level}),this},de.prototype.unuse=function(e){var t=e.stack,i=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(l){return a?l.create!==a:!!i&&l.name!==i})),this},de.prototype.open=function(){var e=this;return vt(Je,function(){return Cs(e)})},de.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=jt.indexOf(this);if(0<=t&&jt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new R(function(i){e.dbReadyResolve=i}),e.openCanceller=new R(function(i,a){e.cancelOpen=a}))},de.prototype.close=function(i){var t=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;t?(i.isBeingOpened&&i.cancelOpen(new L.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new L.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},de.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new R(function(l,u){function c(){t.close(e);var m=t._deps.indexedDB.deleteDatabase(t.name);m.onsuccess=ae(function(){var p,h,_;p=t._deps,h=t.name,_=p.indexedDB,p=p.IDBKeyRange,mi(_)||h===Yn||di(_,p).delete(h).catch(te),l()}),m.onerror=Ke(u),m.onblocked=t._fireOnBlocked}if(i)throw new L.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(c):c()})},de.prototype.backendDB=function(){return this.idbdb},de.prototype.isOpen=function(){return this.idbdb!==null},de.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},de.prototype.hasFailed=function(){return this._state.dbOpenError!==null},de.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(de.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),de.prototype.transaction=function(){var e=function(t,i,a){var l=arguments.length;if(l<2)throw new L.InvalidArgument("Too few arguments");for(var u=new Array(l-1);--l;)u[l-1]=arguments[l];return a=u.pop(),[t,Zi(u),a]}.apply(this,arguments);return this._transaction.apply(this,e)},de.prototype._transaction=function(e,t,i){var a=this,l=B.trans;l&&l.db===this&&e.indexOf("!")===-1||(l=null);var u,c,m=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(c=t.map(function(h){if(h=h instanceof a.Table?h.name:h,typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===ei)u=ei;else{if(e!="rw"&&e!=ti)throw new L.InvalidArgument("Invalid transaction mode: "+e);u=ti}if(l){if(l.mode===ei&&u===ti){if(!m)throw new L.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&c.forEach(function(h){if(l&&l.storeNames.indexOf(h)===-1){if(!m)throw new L.SubTransaction("Table "+h+" not included in parent transaction.");l=null}}),m&&l&&!l.active&&(l=null)}}catch(h){return l?l._promise(null,function(_,f){f(h)}):ce(h)}var p=function h(_,f,w,g,v){return R.resolve().then(function(){var y=B.transless||B,b=_._createTransaction(f,w,_._dbSchema,g);if(b.explicit=!0,y={trans:b,transless:y},g)b.idbtrans=g.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,_._state.PR1398_maxLoop=3}catch(A){return A.name===Gr.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return h(_,f,w,null,v)})):ce(A)}var C,x=qr(v);return x&&Tt(),y=R.follow(function(){var A;(C=v.call(b,b))&&(x?(A=Ze.bind(null,null),C.then(A,A)):typeof C.next=="function"&&typeof C.throw=="function"&&(C=_i(C)))},y),(C&&typeof C.then=="function"?R.resolve(C).then(function(A){return b.active?A:ce(new L.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):y.then(function(){return C})).then(function(A){return g&&b._resolve(),b._completion.then(function(){return A})}).catch(function(A){return b._reject(A),ce(A)})})}.bind(null,this,u,c,l,i);return l?l._promise(u,p,"lock"):B.trans?vt(B.transless,function(){return a._whenReady(p)}):this._whenReady(p)},de.prototype.table=function(e){if(!Y(this._allTables,e))throw new L.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},de);function de(e,t){var i=this;this._middlewares={},this.verno=0;var a=de.dependencies;this._options=t=r({addons:de.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},a=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l,u,c,m,p,h={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:te,dbReadyPromise:null,cancelOpen:te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};h.dbReadyPromise=new R(function(f){h.dbReadyResolve=f}),h.openCanceller=new R(function(f,w){h.cancelOpen=w}),this._state=h,this.name=e,this.on=dn(this,"populate","blocked","versionchange","close",{ready:[Hr,te]}),this.once=function(f,w){var g=function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];i.on(f).unsubscribe(g),w.apply(i,v)};return i.on(f,g)},this.on.ready.subscribe=Rn(this.on.ready.subscribe,function(f){return function(w,g){de.vip(function(){var v,y=i._state;y.openComplete?(y.dbOpenError||R.resolve().then(w),g&&f(w)):y.onReadyBeingFired?(y.onReadyBeingFired.push(w),g&&f(w)):(f(w),v=i,g||f(function b(){v.on.ready.unsubscribe(w),v.on.ready.unsubscribe(b)}))})}}),this.Collection=(l=this,mn(ds.prototype,function(C,b){this.db=l;var g=ca,v=null;if(b)try{g=b()}catch(x){v=x}var y=C._ctx,b=y.table,C=b.hook.reading.fire;this._ctx={table:b,index:y.index,isPrimKey:!y.index||b.schema.primKey.keyPath&&y.index===b.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:v,or:y.or,valueMapper:C!==an?C:null}})),this.Table=(u=this,mn(ga.prototype,function(f,w,g){this.db=u,this._tx=g,this.name=f,this.schema=w,this.hook=u._allTables[f]?u._allTables[f].hook:dn(null,{creating:[ns,te],reading:[ts,an],updating:[is,te],deleting:[rs,te]})})),this.Transaction=(c=this,mn(ps.prototype,function(f,w,g,v,y){var b=this;f!=="readonly"&&w.forEach(function(C){C=(C=g[C])===null||C===void 0?void 0:C.yProps,C&&(w=w.concat(C.map(function(x){return x.updatesTable})))}),this.db=c,this.mode=f,this.storeNames=w,this.schema=g,this.chromeTransactionDurability=v,this.idbtrans=null,this.on=dn(this,"complete","error","abort"),this.parent=y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new R(function(C,x){b._resolve=C,b._reject=x}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(C){var x=b.active;return b.active=!1,b.on.error.fire(C),b.parent?b.parent._reject(C):x&&b.idbtrans&&b.idbtrans.abort(),ce(C)})})),this.Version=(m=this,mn(ws.prototype,function(f){this.db=m,this._cfg={version:f,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(p=this,mn(wa.prototype,function(f,w,g){if(this.db=p,this._ctx={table:f,index:w===":id"?null:w,or:g},this._cmp=this._ascending=Q,this._descending=function(v,y){return Q(y,v)},this._max=function(v,y){return 0<Q(v,y)?v:y},this._min=function(v,y){return Q(v,y)<0?v:y},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new L.MissingAPI})),this.on("versionchange",function(f){0<f.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(f){!f.newVersion||f.newVersion<f.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(f.oldVersion/10))}),this._maxKey=hn(t.IDBKeyRange),this._createTransaction=function(f,w,g,v){return new i.Transaction(f,w,g,i._options.chromeTransactionDurability,v)},this._fireOnBlocked=function(f){i.on("blocked").fire(f),jt.filter(function(w){return w.name===i.name&&w!==i&&!w._state.vcFired}).map(function(w){return w.on("versionchange").fire(f)})},this.use(As),this.use(Ms),this.use(Ds),this.use(xs),this.use(Es);var _=new Proxy(this,{get:function(f,w,g){if(w==="_vip")return!0;if(w==="table")return function(y){return cr(i.table(y),_)};var v=Reflect.get(f,w,g);return v instanceof ga?cr(v,_):w==="tables"?v.map(function(y){return cr(y,_)}):w==="_createTransaction"?function(){return cr(v.apply(this,arguments),_)}:v}});this.vip=_,a.forEach(function(f){return f(i)})}var dr,Te=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ps=(xi.prototype.subscribe=function(e,t,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:i})},xi.prototype[Te]=function(){return this},xi);function xi(e){this._subscribe=e}try{dr={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{dr={indexedDB:null,IDBKeyRange:null}}function Ta(e){var t,i=!1,a=new Ps(function(l){var u=qr(e),c,m=!1,p={},h={},_={get closed(){return m},unsubscribe:function(){m||(m=!0,c&&c.abort(),f&&nt.storagemutated.unsubscribe(g))}};l.start&&l.start(_);var f=!1,w=function(){return Zr(v)},g=function(y){sr(p,y),hi(h,p)&&w()},v=function(){var y,b,C;!m&&dr.indexedDB&&(p={},y={},c&&c.abort(),c=new AbortController,C=(function(x){var A=Ot();try{u&&Tt();var D=Xe(e,x);return D=u?D.finally(Ze):D}finally{A&&Nt()}})(b={subscr:y,signal:c.signal,requery:w,querier:e,trans:null}),Promise.resolve(C).then(function(x){i=!0,t=x,m||b.signal.aborted||(p={},(function(A){for(var D in A)if(Y(A,D))return;return 1})(h=y)||f||(nt(pn,g),f=!0),Zr(function(){return!m&&l.next&&l.next(x)}))},function(x){i=!1,["DatabaseClosedError","AbortError"].includes(x?.name)||m||Zr(function(){m||l.error&&l.error(x)})}))};return setTimeout(w,0),_});return a.hasValue=function(){return i},a.getValue=function(){return t},a}var wt=Qe;function Ei(e){var t=rt;try{rt=!0,nt.storagemutated.fire(e),yi(e,!0)}finally{rt=t}}ue(wt,r(r({},Bn),{delete:function(e){return new wt(e,{addons:[]}).delete()},exists:function(e){return new wt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=wt.dependencies,i=t.indexedDB,t=t.IDBKeyRange,(mi(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(l){return l.name}).filter(function(l){return l!==Yn})}):di(i,t).toCollection().primaryKeys()).then(e)}catch{return ce(new L.MissingAPI)}var t,i},defineClass:function(){return function(e){O(this,e)}},ignoreTransaction:function(e){return B.trans?vt(B.transless,e):e()},vip:fi,async:function(e){return function(){try{var t=_i(e.apply(this,arguments));return t&&typeof t.then=="function"?t:R.resolve(t)}catch(i){return ce(i)}}},spawn:function(e,t,i){try{var a=_i(e.apply(i,t||[]));return a&&typeof a.then=="function"?a:R.resolve(a)}catch(l){return ce(l)}},currentTransaction:{get:function(){return B.trans||null}},waitFor:function(e,t){return t=R.resolve(typeof e=="function"?wt.ignoreTransaction(e):e).timeout(t||6e4),B.trans?B.trans.waitFor(t):t},Promise:R,debug:{get:function(){return Le},set:function(e){ra(e)}},derive:Ie,extend:O,props:ue,override:Rn,Events:dn,on:nt,liveQuery:Ta,extendObservabilitySet:sr,getByKeyPath:We,setByKeyPath:Ae,delByKeyPath:function(e,t){typeof t=="string"?Ae(e,t,void 0):"length"in t&&[].map.call(t,function(i){Ae(e,i,void 0)})},shallowClone:Xi,deepClone:ct,getObjectDiff:bi,cmp:Q,asap:Ji,minKey:-1/0,addons:[],connections:jt,errnames:Gr,dependencies:dr,cache:bt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,2*i)})})),wt.maxKey=hn(wt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(nt(pn,function(e){rt||(e=new CustomEvent(ii,{detail:e}),rt=!0,dispatchEvent(e),rt=!1)}),addEventListener(ii,function(e){e=e.detail,rt||Ei(e)}));var Lt,rt=!1,ja=function(){};return typeof BroadcastChannel<"u"&&((ja=function(){(Lt=new BroadcastChannel(ii)).onmessage=function(e){return e.data&&Ei(e.data)}})(),typeof Lt.unref=="function"&&Lt.unref(),nt(pn,function(e){rt||Lt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Qe.disableBfCache&&e.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),Lt?.close();for(var t=0,i=jt;t<i.length;t++)i[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Qe.disableBfCache&&e.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),ja(),Ei({all:new be(-1/0,[[]])}))})),R.rejectionMapper=function(e,t){return!e||e instanceof kt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!na[e.name]?e:(t=new na[e.name](t||e.message,e),"stack"in e&&Pe(t,"stack",{get:function(){return this.inner.stack}}),t)},ra(Le),r(Qe,Object.freeze({__proto__:null,Dexie:Qe,liveQuery:Ta,Entity:da,cmp:Q,PropModification:cn,replacePrefix:function(e,t){return new cn({replacePrefix:[e,t]})},add:function(e){return new cn({add:e})},remove:function(e){return new cn({remove:e})},default:Qe,RangeSet:be,mergeRanges:yn,rangesOverlap:Da}),{default:Qe}),Qe})});function Fs(o,r){if(o&1){let n=_e();S(0,"a",12),ee("keyup.enter",function(){X(n),q(3);let d=Ve(1);return Z(d.previous())})("click",function(){X(n),q(3);let d=Ve(1);return Z(d.previous())}),P(1),S(2,"span",13),P(3),V()()}if(o&2){let n=q(3);j(),Be(" ",n.previousLabel," "),j(2),pe(n.screenReaderPageLabel)}}function Os(o,r){if(o&1&&(S(0,"span",14),P(1),S(2,"span",13),P(3),V()()),o&2){let n=q(3);j(),Be(" ",n.previousLabel," "),j(2),pe(n.screenReaderPageLabel)}}function Ns(o,r){if(o&1&&(S(0,"li",9),At(1,Fs,4,2,"a",10)(2,Os,4,2,"span",11),V()),o&2){q(2);let n=Ve(1);fe("disabled",n.isFirstPage()),j(),ie("ngIf",1<n.getCurrent()),j(),ie("ngIf",n.isFirstPage())}}function Ts(o,r){if(o&1){let n=_e();S(0,"a",12),ee("keyup.enter",function(){X(n);let d=q().$implicit;q(2);let E=Ve(1);return Z(E.setCurrent(d.value))})("click",function(){X(n);let d=q().$implicit;q(2);let E=Ve(1);return Z(E.setCurrent(d.value))}),S(1,"span",13),P(2),V(),S(3,"span"),P(4),Cn(5,"number"),V()()}if(o&2){let n=q().$implicit,s=q(2);j(2),Be("",s.screenReaderPageLabel," "),j(2),pe(n.label==="..."?n.label:xn(5,2,n.label,""))}}function js(o,r){if(o&1&&(Ya(0),S(1,"span",16)(2,"span",13),P(3),V(),S(4,"span"),P(5),Cn(6,"number"),V()(),Qa()),o&2){let n=q().$implicit,s=q(2);j(3),Be("",s.screenReaderCurrentLabel," "),j(2),pe(n.label==="..."?n.label:xn(6,2,n.label,""))}}function Rs(o,r){if(o&1&&(S(0,"li"),At(1,Ts,6,5,"a",10)(2,js,7,5,"ng-container",15),V()),o&2){let n=r.$implicit;q(2);let s=Ve(1);fe("current",s.getCurrent()===n.value)("ellipsis",n.label==="..."),j(),ie("ngIf",s.getCurrent()!==n.value),j(),ie("ngIf",s.getCurrent()===n.value)}}function Us(o,r){if(o&1){let n=_e();S(0,"a",12),ee("keyup.enter",function(){X(n),q(3);let d=Ve(1);return Z(d.next())})("click",function(){X(n),q(3);let d=Ve(1);return Z(d.next())}),P(1),S(2,"span",13),P(3),V()()}if(o&2){let n=q(3);j(),Be(" ",n.nextLabel," "),j(2),pe(n.screenReaderPageLabel)}}function Bs(o,r){if(o&1&&(S(0,"span",14),P(1),S(2,"span",13),P(3),V()()),o&2){let n=q(3);j(),Be(" ",n.nextLabel," "),j(2),pe(n.screenReaderPageLabel)}}function Ls(o,r){if(o&1&&(S(0,"li",17),At(1,Us,4,2,"a",10)(2,Bs,4,2,"span",11),V()),o&2){q(2);let n=Ve(1);fe("disabled",n.isLastPage()),j(),ie("ngIf",!n.isLastPage()),j(),ie("ngIf",n.isLastPage())}}function Ks(o,r){if(o&1&&(S(0,"ul",4),At(1,Ns,3,4,"li",5),S(2,"li",6),P(3),V(),At(4,Rs,3,6,"li",7)(5,Ls,3,4,"li",8),V()),o&2){let n=q(),s=Ve(1);fe("responsive",n.responsive),j(),ie("ngIf",n.directionLinks),j(2),to(" ",s.getCurrent()," / ",s.getLastPage()," "),j(),ie("ngForOf",s.pages)("ngForTrackBy",n.trackByIndex),j(),ie("ngIf",n.directionLinks)}}var Dn=class{constructor(){this.change=new xe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(r){return r.id==null&&(r.id=this.DEFAULT_ID),this.instances[r.id]?this.updateInstance(r):(this.instances[r.id]=r,!0)}updateInstance(r){let n=!1;for(let s in this.instances[r.id])r[s]!==this.instances[r.id][s]&&(this.instances[r.id][s]=r[s],n=!0);return n}getCurrentPage(r){return this.instances[r]?this.instances[r].currentPage:1}setCurrentPage(r,n){if(this.instances[r]){let s=this.instances[r],d=Math.ceil(s.totalItems/s.itemsPerPage);n<=d&&1<=n&&(this.instances[r].currentPage=n,this.change.emit(r))}}setTotalItems(r,n){this.instances[r]&&0<=n&&(this.instances[r].totalItems=n,this.change.emit(r))}setItemsPerPage(r,n){this.instances[r]&&(this.instances[r].itemsPerPage=n,this.change.emit(r))}getInstance(r=this.DEFAULT_ID){return this.instances[r]?this.clone(this.instances[r]):{}}clone(r){var n={};for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);return n}},qs=Number.MAX_SAFE_INTEGER,lo=(()=>{class o{constructor(n){this.service=n,this.state={}}transform(n,s){if(!(n instanceof Array)){let ze=s.id||this.service.defaultId();return this.state[ze]?this.state[ze].slice:n}let d=s.totalItems&&s.totalItems!==n.length,E=this.createInstance(n,s),O=E.id,W,re,Y=E.itemsPerPage,ue=this.service.register(E);if(!d&&n instanceof Array){if(Y=+Y||qs,W=(E.currentPage-1)*Y,re=W+Y,this.stateIsIdentical(O,n,W,re))return this.state[O].slice;{let Pe=n.slice(W,re);return this.saveState(O,n,Pe,W,re),this.service.change.emit(O),Pe}}else return ue&&this.service.change.emit(O),this.saveState(O,n,n,W,re),n}createInstance(n,s){return this.checkConfig(s),{id:s.id!=null?s.id:this.service.defaultId(),itemsPerPage:+s.itemsPerPage||0,currentPage:+s.currentPage||1,totalItems:+s.totalItems||n.length}}checkConfig(n){let d=["itemsPerPage","currentPage"].filter(E=>!(E in n));if(0<d.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${d.join(", ")}`)}saveState(n,s,d,E,O){this.state[n]={collection:s,size:s.length,slice:d,start:E,end:O}}stateIsIdentical(n,s,d,E){let O=this.state[n];return!O||!(O.size===s.length&&O.start===d&&O.end===E)?!1:O.slice.every((re,Y)=>re===s[d+Y])}}return o.\u0275fac=function(n){return new(n||o)(K(Dn,16))},o.\u0275pipe=Ga({name:"paginate",type:o,pure:!1,standalone:!1}),o})();var Gs=(()=>{class o{constructor(n,s){this.service=n,this.changeDetectorRef=s,this.maxSize=7,this.pageChange=new xe,this.pageBoundsCorrection=new xe,this.pages=[],this.changeSub=this.service.change.subscribe(d=>{this.id===d&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){this.id===void 0&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(n){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return this.getCurrent()===1}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(n){this.pageChange.emit(n)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let n=this.service.getInstance(this.id);return n.totalItems<1?1:Math.ceil(n.totalItems/n.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){this.service.getInstance(this.id).id==null&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let n=this.service.getInstance(this.id),s=this.outOfBoundCorrection(n);s!==n.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(s),this.pages=this.createPageArray(n.currentPage,n.itemsPerPage,n.totalItems,this.maxSize)}):this.pages=this.createPageArray(n.currentPage,n.itemsPerPage,n.totalItems,this.maxSize)}outOfBoundCorrection(n){let s=Math.ceil(n.totalItems/n.itemsPerPage);return s<n.currentPage&&0<s?s:n.currentPage<1?1:n.currentPage}createPageArray(n,s,d,E){E=+E;let O=[],W=Math.max(Math.ceil(d/s),1),re=Math.ceil(E/2),Y=n<=re,ue=W-re<n,ze=!Y&&!ue,Pe=E<W,Ie=1;for(;Ie<=W&&Ie<=E;){let tn,jn=this.calculatePageNumber(Ie,n,E,W),Pt=Ie===2&&(ze||ue),Rn=Ie===E-1&&(ze||Y);Pe&&(Pt||Rn)?tn="...":tn=jn,O.push({label:tn,value:jn}),Ie++}return O}calculatePageNumber(n,s,d,E){let O=Math.ceil(d/2);return n===d?E:n===1?n:d<E?E-O<s?E-d+n:O<s?s-O+n:n:n}}return o.\u0275fac=function(n){return new(n||o)(K(Dn),K(An))},o.\u0275dir=ye({type:o,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],standalone:!1,features:[qt]}),o})();function Ii(o){return!!o&&o!=="false"}var uo=(()=>{class o{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new xe,this.pageBoundsCorrection=new xe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(n){this._directionLinks=Ii(n)}get autoHide(){return this._autoHide}set autoHide(n){this._autoHide=Ii(n)}get responsive(){return this._responsive}set responsive(n){this._responsive=Ii(n)}trackByIndex(n){return n}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=ve({type:o,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},standalone:!1,decls:4,vars:4,consts:[["p","paginationApi"],[3,"pageChange","pageBoundsCorrection","id","maxSize"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(n,s){if(n&1){let d=_e();S(0,"pagination-template",1,0),ee("pageChange",function(O){return X(d),Z(s.pageChange.emit(O))})("pageBoundsCorrection",function(O){return X(d),Z(s.pageBoundsCorrection.emit(O))}),S(2,"nav",2),At(3,Ks,6,8,"ul",3),V()()}if(n&2){let d=Ve(1);ie("id",s.id)("maxSize",s.maxSize),j(2),Di("aria-label",s.screenReaderPaginationLabel),j(),ie("ngIf",!(s.autoHide&&d.pages.length<=1))}},dependencies:[Gs,ao,io,oo],styles:[`.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}
`],encapsulation:2,changeDetection:0}),o})(),co=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=Gt({type:o}),o.\u0275inj=Kt({providers:[Dn],imports:[[vr]]}),o})();var wo=(()=>{class o{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,s){this._renderer=n,this._elementRef=s}setProperty(n,s){this._renderer.setProperty(this._elementRef.nativeElement,n,s)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(s){return new(s||o)(K(wn),K(bn))};static \u0275dir=ye({type:o})}return o})(),ji=(()=>{class o extends wo{static \u0275fac=(()=>{let n;return function(d){return(n||(n=_n(o)))(d||o)}})();static \u0275dir=ye({type:o,features:[Ue]})}return o})(),Fn=new Et("");var zs={provide:Fn,useExisting:xt(()=>st),multi:!0};function Ws(){let o=Pi()?Pi().getUserAgent():"";return/android (\d+)/.test(o.toLowerCase())}var $s=new Et(""),st=(()=>{class o extends wo{_compositionMode;_composing=!1;constructor(n,s,d){super(n,s),this._compositionMode=d,this._compositionMode==null&&(this._compositionMode=!Ws())}writeValue(n){let s=n??"";this.setProperty("value",s)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(s){return new(s||o)(K(wn),K(bn),K($s,8))};static \u0275dir=ye({type:o,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,d){s&1&&ee("input",function(O){return d._handleInput(O.target.value)})("blur",function(){return d.onTouched()})("compositionstart",function(){return d._compositionStart()})("compositionend",function(O){return d._compositionEnd(O.target.value)})},standalone:!1,features:[Dt([zs]),Ue]})}return o})();function Ri(o){return o==null||Ui(o)===0}function Ui(o){return o==null?null:Array.isArray(o)||typeof o=="string"?o.length:o instanceof Set?o.size:null}var Bi=new Et(""),Li=new Et(""),Ys=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Me=class{static min(r){return Qs(r)}static max(r){return Js(r)}static required(r){return Xs(r)}static requiredTrue(r){return Zs(r)}static email(r){return el(r)}static minLength(r){return tl(r)}static maxLength(r){return nl(r)}static pattern(r){return rl(r)}static nullValidator(r){return Co()}static compose(r){return Vo(r)}static composeAsync(r){return Po(r)}};function Qs(o){return r=>{if(r.value==null||o==null)return null;let n=parseFloat(r.value);return!isNaN(n)&&n<o?{min:{min:o,actual:r.value}}:null}}function Js(o){return r=>{if(r.value==null||o==null)return null;let n=parseFloat(r.value);return!isNaN(n)&&n>o?{max:{max:o,actual:r.value}}:null}}function Xs(o){return Ri(o.value)?{required:!0}:null}function Zs(o){return o.value===!0?null:{required:!0}}function el(o){return Ri(o.value)||Ys.test(o.value)?null:{email:!0}}function tl(o){return r=>{let n=r.value?.length??Ui(r.value);return n===null||n===0?null:n<o?{minlength:{requiredLength:o,actualLength:n}}:null}}function nl(o){return r=>{let n=r.value?.length??Ui(r.value);return n!==null&&n>o?{maxlength:{requiredLength:o,actualLength:n}}:null}}function rl(o){if(!o)return Co;let r,n;return typeof o=="string"?(n="",o.charAt(0)!=="^"&&(n+="^"),n+=o,o.charAt(o.length-1)!=="$"&&(n+="$"),r=new RegExp(n)):(n=o.toString(),r=o),s=>{if(Ri(s.value))return null;let d=s.value;return r.test(d)?null:{pattern:{requiredPattern:n,actualValue:d}}}}function Co(o){return null}function xo(o){return o!=null}function Eo(o){return Ha(o)?Ua(o):o}function Ao(o){let r={};return o.forEach(n=>{r=n!=null?De(De({},r),n):r}),Object.keys(r).length===0?null:r}function Do(o,r){return r.map(n=>n(o))}function il(o){return!o.validate}function So(o){return o.map(r=>il(r)?r:n=>r.validate(n))}function Vo(o){if(!o)return null;let r=o.filter(xo);return r.length==0?null:function(n){return Ao(Do(n,r))}}function Mo(o){return o!=null?Vo(So(o)):null}function Po(o){if(!o)return null;let r=o.filter(xo);return r.length==0?null:function(n){let s=Do(n,r).map(Eo);return La(s).pipe(Ba(Ao))}}function Io(o){return o!=null?Po(So(o)):null}function mo(o,r){return o===null?[r]:Array.isArray(o)?[...o,r]:[o,r]}function ko(o){return o._rawValidators}function Fo(o){return o._rawAsyncValidators}function ki(o){return o?Array.isArray(o)?o:[o]:[]}function _r(o,r){return Array.isArray(o)?o.includes(r):o===r}function fo(o,r){let n=ki(r);return ki(o).forEach(d=>{_r(n,d)||n.push(d)}),n}function po(o,r){return ki(r).filter(n=>!_r(o,n))}var br=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=Mo(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=Io(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r=void 0){this.control&&this.control.reset(r)}hasError(r,n){return this.control?this.control.hasError(r,n):!1}getError(r,n){return this.control?this.control.getError(r,n):null}},St=class extends br{name;get formDirective(){return null}get path(){return null}},Vt=class extends br{_parent=null;name=null;valueAccessor=null},wr=class{_cd;constructor(r){this._cd=r}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Qt=(()=>{class o extends wr{constructor(n){super(n)}static \u0275fac=function(s){return new(s||o)(K(Vt,2))};static \u0275dir=ye({type:o,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,d){s&2&&fe("ng-untouched",d.isUntouched)("ng-touched",d.isTouched)("ng-pristine",d.isPristine)("ng-dirty",d.isDirty)("ng-valid",d.isValid)("ng-invalid",d.isInvalid)("ng-pending",d.isPending)},standalone:!1,features:[Ue]})}return o})(),Dr=(()=>{class o extends wr{constructor(n){super(n)}static \u0275fac=function(s){return new(s||o)(K(St,10))};static \u0275dir=ye({type:o,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(s,d){s&2&&fe("ng-untouched",d.isUntouched)("ng-touched",d.isTouched)("ng-pristine",d.isPristine)("ng-dirty",d.isDirty)("ng-valid",d.isValid)("ng-invalid",d.isInvalid)("ng-pending",d.isPending)("ng-submitted",d.isSubmitted)},standalone:!1,features:[Ue]})}return o})();var Sn="VALID",yr="INVALID",Wt="PENDING",Vn="DISABLED",ot=class{},Cr=class extends ot{value;source;constructor(r,n){super(),this.value=r,this.source=n}},Mn=class extends ot{pristine;source;constructor(r,n){super(),this.pristine=r,this.source=n}},Pn=class extends ot{touched;source;constructor(r,n){super(),this.touched=r,this.source=n}},$t=class extends ot{status;source;constructor(r,n){super(),this.status=r,this.source=n}},Fi=class extends ot{source;constructor(r){super(),this.source=r}},kn=class extends ot{source;constructor(r){super(),this.source=r}};function Ki(o){return(Sr(o)?o.validators:o)||null}function al(o){return Array.isArray(o)?Mo(o):o||null}function qi(o,r){return(Sr(r)?r.asyncValidators:o)||null}function ol(o){return Array.isArray(o)?Io(o):o||null}function Sr(o){return o!=null&&!Array.isArray(o)&&typeof o=="object"}function Oo(o,r,n){let s=o.controls;if(!(r?Object.keys(s):s).length)throw new fr(1e3,"");if(!s[n])throw new fr(1001,"")}function No(o,r,n){o._forEachChild((s,d)=>{if(n[d]===void 0)throw new fr(1002,"")})}var Yt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(r,n){this._assignValidators(r),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(r){this._rawValidators=this._composedValidatorFn=r}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(r){this._rawAsyncValidators=this._composedAsyncValidatorFn=r}get parent(){return this._parent}get status(){return it(this.statusReactive)}set status(r){it(()=>this.statusReactive.set(r))}_status=En(()=>this.statusReactive());statusReactive=Oe(void 0);get valid(){return this.status===Sn}get invalid(){return this.status===yr}get pending(){return this.status==Wt}get disabled(){return this.status===Vn}get enabled(){return this.status!==Vn}errors;get pristine(){return it(this.pristineReactive)}set pristine(r){it(()=>this.pristineReactive.set(r))}_pristine=En(()=>this.pristineReactive());pristineReactive=Oe(!0);get dirty(){return!this.pristine}get touched(){return it(this.touchedReactive)}set touched(r){it(()=>this.touchedReactive.set(r))}_touched=En(()=>this.touchedReactive());touchedReactive=Oe(!1);get untouched(){return!this.touched}_events=new Ra;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(r){this._assignValidators(r)}setAsyncValidators(r){this._assignAsyncValidators(r)}addValidators(r){this.setValidators(fo(r,this._rawValidators))}addAsyncValidators(r){this.setAsyncValidators(fo(r,this._rawAsyncValidators))}removeValidators(r){this.setValidators(po(r,this._rawValidators))}removeAsyncValidators(r){this.setAsyncValidators(po(r,this._rawAsyncValidators))}hasValidator(r){return _r(this._rawValidators,r)}hasAsyncValidator(r){return _r(this._rawAsyncValidators,r)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(r={}){let n=this.touched===!1;this.touched=!0;let s=r.sourceControl??this;this._parent&&!r.onlySelf&&this._parent.markAsTouched(je(De({},r),{sourceControl:s})),n&&r.emitEvent!==!1&&this._events.next(new Pn(!0,s))}markAllAsDirty(r={}){this.markAsDirty({onlySelf:!0,emitEvent:r.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(r))}markAllAsTouched(r={}){this.markAsTouched({onlySelf:!0,emitEvent:r.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(r))}markAsUntouched(r={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let s=r.sourceControl??this;this._forEachChild(d=>{d.markAsUntouched({onlySelf:!0,emitEvent:r.emitEvent,sourceControl:s})}),this._parent&&!r.onlySelf&&this._parent._updateTouched(r,s),n&&r.emitEvent!==!1&&this._events.next(new Pn(!1,s))}markAsDirty(r={}){let n=this.pristine===!0;this.pristine=!1;let s=r.sourceControl??this;this._parent&&!r.onlySelf&&this._parent.markAsDirty(je(De({},r),{sourceControl:s})),n&&r.emitEvent!==!1&&this._events.next(new Mn(!1,s))}markAsPristine(r={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let s=r.sourceControl??this;this._forEachChild(d=>{d.markAsPristine({onlySelf:!0,emitEvent:r.emitEvent})}),this._parent&&!r.onlySelf&&this._parent._updatePristine(r,s),n&&r.emitEvent!==!1&&this._events.next(new Mn(!0,s))}markAsPending(r={}){this.status=Wt;let n=r.sourceControl??this;r.emitEvent!==!1&&(this._events.next(new $t(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.markAsPending(je(De({},r),{sourceControl:n}))}disable(r={}){let n=this._parentMarkedDirty(r.onlySelf);this.status=Vn,this.errors=null,this._forEachChild(d=>{d.disable(je(De({},r),{onlySelf:!0}))}),this._updateValue();let s=r.sourceControl??this;r.emitEvent!==!1&&(this._events.next(new Cr(this.value,s)),this._events.next(new $t(this.status,s)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(je(De({},r),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(d=>d(!0))}enable(r={}){let n=this._parentMarkedDirty(r.onlySelf);this.status=Sn,this._forEachChild(s=>{s.enable(je(De({},r),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent}),this._updateAncestors(je(De({},r),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(r,n){this._parent&&!r.onlySelf&&(this._parent.updateValueAndValidity(r),r.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(r){this._parent=r}getRawValue(){return this.value}updateValueAndValidity(r={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let s=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sn||this.status===Wt)&&this._runAsyncValidator(s,r.emitEvent)}let n=r.sourceControl??this;r.emitEvent!==!1&&(this._events.next(new Cr(this.value,n)),this._events.next(new $t(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.updateValueAndValidity(je(De({},r),{sourceControl:n}))}_updateTreeValidity(r={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(r)),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vn:Sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(r,n){if(this.asyncValidator){this.status=Wt,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:r!==!1};let s=Eo(this.asyncValidator(this));this._asyncValidationSubscription=s.subscribe(d=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(d,{emitEvent:n,shouldHaveEmitted:r})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let r=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,r}return!1}setErrors(r,n={}){this.errors=r,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(r){let n=r;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((s,d)=>s&&s._find(d),this)}getError(r,n){let s=n?this.get(n):this;return s&&s.errors?s.errors[r]:null}hasError(r,n){return!!this.getError(r,n)}get root(){let r=this;for(;r._parent;)r=r._parent;return r}_updateControlsErrors(r,n,s){this.status=this._calculateStatus(),r&&this.statusChanges.emit(this.status),(r||s)&&this._events.next(new $t(this.status,n)),this._parent&&this._parent._updateControlsErrors(r,n,s)}_initObservables(){this.valueChanges=new xe,this.statusChanges=new xe}_calculateStatus(){return this._allControlsDisabled()?Vn:this.errors?yr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wt)?Wt:this._anyControlsHaveStatus(yr)?yr:Sn}_anyControlsHaveStatus(r){return this._anyControls(n=>n.status===r)}_anyControlsDirty(){return this._anyControls(r=>r.dirty)}_anyControlsTouched(){return this._anyControls(r=>r.touched)}_updatePristine(r,n){let s=!this._anyControlsDirty(),d=this.pristine!==s;this.pristine=s,this._parent&&!r.onlySelf&&this._parent._updatePristine(r,n),d&&this._events.next(new Mn(this.pristine,n))}_updateTouched(r={},n){this.touched=this._anyControlsTouched(),this._events.next(new Pn(this.touched,n)),this._parent&&!r.onlySelf&&this._parent._updateTouched(r,n)}_onDisabledChange=[];_registerOnCollectionChange(r){this._onCollectionChange=r}_setUpdateStrategy(r){Sr(r)&&r.updateOn!=null&&(this._updateOn=r.updateOn)}_parentMarkedDirty(r){let n=this._parent&&this._parent.dirty;return!r&&!!n&&!this._parent._anyControlsDirty()}_find(r){return null}_assignValidators(r){this._rawValidators=Array.isArray(r)?r.slice():r,this._composedValidatorFn=al(this._rawValidators)}_assignAsyncValidators(r){this._rawAsyncValidators=Array.isArray(r)?r.slice():r,this._composedAsyncValidatorFn=ol(this._rawAsyncValidators)}},xr=class extends Yt{constructor(r,n,s){super(Ki(n),qi(s,n)),this.controls=r,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(r,n){return this.controls[r]?this.controls[r]:(this.controls[r]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(r,n,s={}){this.registerControl(r,n),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(r,n={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(r,n,s={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],n&&this.registerControl(r,n),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(r){return this.controls.hasOwnProperty(r)&&this.controls[r].enabled}setValue(r,n={}){No(this,!0,r),Object.keys(r).forEach(s=>{Oo(this,!0,s),this.controls[s].setValue(r[s],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(r,n={}){r!=null&&(Object.keys(r).forEach(s=>{let d=this.controls[s];d&&d.patchValue(r[s],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(r={},n={}){this._forEachChild((s,d)=>{s.reset(r?r[d]:null,je(De({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new kn(this))}getRawValue(){return this._reduceChildren({},(r,n,s)=>(r[s]=n.getRawValue(),r))}_syncPendingControls(){let r=this._reduceChildren(!1,(n,s)=>s._syncPendingControls()?!0:n);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_forEachChild(r){Object.keys(this.controls).forEach(n=>{let s=this.controls[n];s&&r(s,n)})}_setUpControls(){this._forEachChild(r=>{r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(r){for(let[n,s]of Object.entries(this.controls))if(this.contains(n)&&r(s))return!0;return!1}_reduceValue(){let r={};return this._reduceChildren(r,(n,s,d)=>((s.enabled||this.disabled)&&(n[d]=s.value),n))}_reduceChildren(r,n){let s=r;return this._forEachChild((d,E)=>{s=n(s,d,E)}),s}_allControlsDisabled(){for(let r of Object.keys(this.controls))if(this.controls[r].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(r){return this.controls.hasOwnProperty(r)?this.controls[r]:null}};var Oi=class extends xr{};var Vr=new Et("",{factory:()=>Mr}),Mr="always";function To(o,r){return[...r.path,o]}function Ni(o,r,n=Mr){Gi(o,r),r.valueAccessor.writeValue(o.value),(o.disabled||n==="always")&&r.valueAccessor.setDisabledState?.(o.disabled),ll(o,r),cl(o,r),ul(o,r),sl(o,r)}function ho(o,r,n=!0){let s=()=>{};r.valueAccessor&&(r.valueAccessor.registerOnChange(s),r.valueAccessor.registerOnTouched(s)),Ar(o,r),o&&(r._invokeOnDestroyCallbacks(),o._registerOnCollectionChange(()=>{}))}function Er(o,r){o.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(r)})}function sl(o,r){if(r.valueAccessor.setDisabledState){let n=s=>{r.valueAccessor.setDisabledState(s)};o.registerOnDisabledChange(n),r._registerOnDestroy(()=>{o._unregisterOnDisabledChange(n)})}}function Gi(o,r){let n=ko(o);r.validator!==null?o.setValidators(mo(n,r.validator)):typeof n=="function"&&o.setValidators([n]);let s=Fo(o);r.asyncValidator!==null?o.setAsyncValidators(mo(s,r.asyncValidator)):typeof s=="function"&&o.setAsyncValidators([s]);let d=()=>o.updateValueAndValidity();Er(r._rawValidators,d),Er(r._rawAsyncValidators,d)}function Ar(o,r){let n=!1;if(o!==null){if(r.validator!==null){let d=ko(o);if(Array.isArray(d)&&d.length>0){let E=d.filter(O=>O!==r.validator);E.length!==d.length&&(n=!0,o.setValidators(E))}}if(r.asyncValidator!==null){let d=Fo(o);if(Array.isArray(d)&&d.length>0){let E=d.filter(O=>O!==r.asyncValidator);E.length!==d.length&&(n=!0,o.setAsyncValidators(E))}}}let s=()=>{};return Er(r._rawValidators,s),Er(r._rawAsyncValidators,s),n}function ll(o,r){r.valueAccessor.registerOnChange(n=>{o._pendingValue=n,o._pendingChange=!0,o._pendingDirty=!0,o.updateOn==="change"&&jo(o,r)})}function ul(o,r){r.valueAccessor.registerOnTouched(()=>{o._pendingTouched=!0,o.updateOn==="blur"&&o._pendingChange&&jo(o,r),o.updateOn!=="submit"&&o.markAsTouched()})}function jo(o,r){o._pendingDirty&&o.markAsDirty(),o.setValue(o._pendingValue,{emitModelToViewChange:!1}),r.viewToModelUpdate(o._pendingValue),o._pendingChange=!1}function cl(o,r){let n=(s,d)=>{r.valueAccessor.writeValue(s),d&&r.viewToModelUpdate(s)};o.registerOnChange(n),r._registerOnDestroy(()=>{o._unregisterOnChange(n)})}function dl(o,r){o==null,Gi(o,r)}function ml(o,r){return Ar(o,r)}function Ro(o,r){if(!o.hasOwnProperty("model"))return!1;let n=o.model;return n.isFirstChange()?!0:!Object.is(r,n.currentValue)}function fl(o){return Object.getPrototypeOf(o.constructor)===ji}function pl(o,r){o._syncPendingControls(),r.forEach(n=>{let s=n.control;s.updateOn==="submit"&&s._pendingChange&&(n.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}function Uo(o,r){if(!r)return null;Array.isArray(r);let n,s,d;return r.forEach(E=>{E.constructor===st?n=E:fl(E)?s=E:d=E}),d||s||n||null}function hl(o,r){let n=o.indexOf(r);n>-1&&o.splice(n,1)}function go(o,r){let n=o.indexOf(r);n>-1&&o.splice(n,1)}function vo(o){return typeof o=="object"&&o!==null&&Object.keys(o).length===2&&"value"in o&&"disabled"in o}var In=class extends Yt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(r=null,n,s){super(Ki(n),qi(s,n)),this._applyFormState(r),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sr(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vo(r)?this.defaultValue=r.value:this.defaultValue=r)}setValue(r,n={}){this.value=this._pendingValue=r,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(s=>s(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(r,n={}){this.setValue(r,n)}reset(r=this.defaultValue,n={}){this._applyFormState(r),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new kn(this))}_updateValue(){}_anyControls(r){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(r){this._onChange.push(r)}_unregisterOnChange(r){go(this._onChange,r)}registerOnDisabledChange(r){this._onDisabledChange.push(r)}_unregisterOnDisabledChange(r){go(this._onDisabledChange,r)}_forEachChild(r){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(r){vo(r)?(this.value=this._pendingValue=r.value,r.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=r}};var gl=o=>o instanceof In;var vl={provide:Vt,useExisting:xt(()=>Hi)},yo=Promise.resolve(),Hi=(()=>{class o extends Vt{_changeDetectorRef;callSetDisabledState;control=new In;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new xe;constructor(n,s,d,E,O,W){super(),this._changeDetectorRef=O,this.callSetDisabledState=W,this._parent=n,this._setValidators(s),this._setAsyncValidators(d),this.valueAccessor=Uo(this,E)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let s=n.name.previousValue;this.formDirective.removeControl({name:s,path:this._getPath(s)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Ro(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ni(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){yo.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let s=n.isDisabled.currentValue,d=s!==0&&ro(s);yo.then(()=>{d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?To(n,this._parent):[n]}static \u0275fac=function(s){return new(s||o)(K(St,9),K(Bi,10),K(Li,10),K(Fn,10),K(An,8),K(Vr,8))};static \u0275dir=ye({type:o,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Dt([vl]),Ue,qt]})}return o})();var Pr=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275dir=ye({type:o,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return o})();var Ti=class extends Yt{constructor(r,n,s){super(Ki(n),qi(s,n)),this.controls=r,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(r){return this.controls[this._adjustIndex(r)]}push(r,n={}){Array.isArray(r)?r.forEach(s=>{this.controls.push(s),this._registerControl(s)}):(this.controls.push(r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(r,n,s={}){this.controls.splice(r,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(r,n={}){let s=this._adjustIndex(r);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(r,n,s={}){let d=this._adjustIndex(r);d<0&&(d=0),this.controls[d]&&this.controls[d]._registerOnCollectionChange(()=>{}),this.controls.splice(d,1),n&&(this.controls.splice(d,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(r,n={}){No(this,!1,r),r.forEach((s,d)=>{Oo(this,!1,d),this.at(d).setValue(s,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(r,n={}){r!=null&&(r.forEach((s,d)=>{this.at(d)&&this.at(d).patchValue(s,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(r=[],n={}){this._forEachChild((s,d)=>{s.reset(r[d],je(De({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new kn(this))}getRawValue(){return this.controls.map(r=>r.getRawValue())}clear(r={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:r.emitEvent}))}_adjustIndex(r){return r<0?r+this.length:r}_syncPendingControls(){let r=this.controls.reduce((n,s)=>s._syncPendingControls()?!0:n,!1);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_forEachChild(r){this.controls.forEach((n,s)=>{r(n,s)})}_updateValue(){this.value=this.controls.filter(r=>r.enabled||this.disabled).map(r=>r.value)}_anyControls(r){return this.controls.some(n=>n.enabled&&r(n))}_setUpControls(){this._forEachChild(r=>this._registerControl(r))}_allControlsDisabled(){for(let r of this.controls)if(r.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(r){r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)}_find(r){return this.at(r)??null}};var yl=(()=>{class o extends St{callSetDisabledState;get submitted(){return it(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=En(()=>this._submittedReactive());_submittedReactive=Oe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(n,s,d){super(),this.callSetDisabledState=d,this._setValidators(n),this._setAsyncValidators(s)}ngOnChanges(n){this.onChanges(n)}ngOnDestroy(){this.onDestroy()}onChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Ar(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(n){let s=this.form.get(n.path);return Ni(s,n,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),s}getControl(n){return this.form.get(n.path)}removeControl(n){ho(n.control||null,n,!1),hl(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}getFormArray(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}updateModel(n,s){this.form.get(n.path).setValue(s)}onReset(){this.resetForm()}resetForm(n=void 0,s={}){this.form.reset(n,s),this._submittedReactive.set(!1)}onSubmit(n){return this.submitted=!0,pl(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Fi(this.control)),n?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(n=>{let s=n.control,d=this.form.get(n.path);s!==d&&(ho(s||null,n),gl(d)&&(Ni(d,n,this.callSetDisabledState),n.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let s=this.form.get(n.path);dl(s,n),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let s=this.form.get(n.path);s&&ml(s,n)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gi(this.form,this),this._oldForm&&Ar(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(s){return new(s||o)(K(Bi,10),K(Li,10),K(Vr,8))};static \u0275dir=ye({type:o,features:[Ue,qt]})}return o})();var Bo=new Et("");var _l={provide:Vt,useExisting:xt(()=>On)},On=(()=>{class o extends Vt{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,s,d,E,O){super(),this._ngModelWarningConfig=O,this._parent=n,this._setValidators(s),this._setAsyncValidators(d),this.valueAccessor=Uo(this,E)}ngOnChanges(n){this._added||this._setUpControl(),Ro(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return To(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(s){return new(s||o)(K(St,13),K(Bi,10),K(Li,10),K(Fn,10),K(Bo,8))};static \u0275dir=ye({type:o,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Dt([_l]),Ue,qt]})}return o})();var bl={provide:St,useExisting:xt(()=>Nn)},Nn=(()=>{class o extends yl{form=null;ngSubmit=new xe;get control(){return this.form}static \u0275fac=(()=>{let n;return function(d){return(n||(n=_n(o)))(d||o)}})();static \u0275dir=ye({type:o,selectors:[["","formGroup",""]],hostBindings:function(s,d){s&1&&ee("submit",function(O){return d.onSubmit(O)})("reset",function(){return d.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Dt([bl]),Ue]})}return o})(),wl={provide:Fn,useExisting:xt(()=>lt),multi:!0};function Lo(o,r){return o==null?`${r}`:(r&&typeof r=="object"&&(r="Object"),`${o}: ${r}`.slice(0,50))}function Cl(o){return o.split(":")[0]}var lt=(()=>{class o extends ji{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=hr(za).injector;destroyRef=hr(Ka);cdr=hr(An);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,qa({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let s=this._getOptionId(n),d=Lo(s,n);this.setProperty("value",d)}registerOnChange(n){this.onChange=s=>{this.value=this._getOptionValue(s),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s),n))return s;return null}_getOptionValue(n){let s=Cl(n);return this._optionMap.has(s)?this._optionMap.get(s):n}static \u0275fac=(()=>{let n;return function(d){return(n||(n=_n(o)))(d||o)}})();static \u0275dir=ye({type:o,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(s,d){s&1&&ee("change",function(O){return d.onChange(O.target.value)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Dt([wl]),Ue]})}return o})(),Jt=(()=>{class o{_element;_renderer;_select;id;constructor(n,s,d){this._element=n,this._renderer=s,this._select=d,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Lo(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(s){return new(s||o)(K(bn),K(wn),K(lt,9))};static \u0275dir=ye({type:o,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return o})(),xl={provide:Fn,useExisting:xt(()=>Ko),multi:!0};function _o(o,r){return o==null?`${r}`:(typeof r=="string"&&(r=`'${r}'`),r&&typeof r=="object"&&(r="Object"),`${o}: ${r}`.slice(0,50))}function El(o){return o.split(":")[0]}var Ko=(()=>{class o extends ji{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let s;if(Array.isArray(n)){let d=n.map(E=>this._getOptionId(E));s=(E,O)=>{E._setSelected(d.indexOf(O.toString())>-1)}}else s=(d,E)=>{d._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(n){this.onChange=s=>{let d=[],E=s.selectedOptions;if(E!==void 0){let O=E;for(let W=0;W<O.length;W++){let re=O[W],Y=this._getOptionValue(re.value);d.push(Y)}}else{let O=s.options;for(let W=0;W<O.length;W++){let re=O[W];if(re.selected){let Y=this._getOptionValue(re.value);d.push(Y)}}}this.value=d,n(d)}}_registerOption(n){let s=(this._idCounter++).toString();return this._optionMap.set(s,n),s}_getOptionId(n){for(let s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s)._value,n))return s;return null}_getOptionValue(n){let s=El(n);return this._optionMap.has(s)?this._optionMap.get(s)._value:n}static \u0275fac=(()=>{let n;return function(d){return(n||(n=_n(o)))(d||o)}})();static \u0275dir=ye({type:o,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(s,d){s&1&&ee("change",function(O){return d.onChange(O.target)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Dt([xl]),Ue]})}return o})(),Xt=(()=>{class o{_element;_renderer;_select;id;_value;constructor(n,s,d){this._element=n,this._renderer=s,this._select=d,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(_o(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(_o(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(s){return new(s||o)(K(bn),K(wn),K(Ko,9))};static \u0275dir=ye({type:o,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return o})();var qo=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=Gt({type:o});static \u0275inj=Kt({})}return o})();function bo(o){return!!o&&(o.asyncValidators!==void 0||o.validators!==void 0||o.updateOn!==void 0)}var Ir=(()=>{class o{useNonNullable=!1;get nonNullable(){let n=new o;return n.useNonNullable=!0,n}group(n,s=null){let d=this._reduceControls(n),E={};return bo(s)?E=s:s!==null&&(E.validators=s.validator,E.asyncValidators=s.asyncValidator),new xr(d,E)}record(n,s=null){let d=this._reduceControls(n);return new Oi(d,s)}control(n,s,d){let E={};return this.useNonNullable?(bo(s)?E=s:(E.validators=s,E.asyncValidators=d),new In(n,je(De({},E),{nonNullable:!0}))):new In(n,s,d)}array(n,s,d){let E=n.map(O=>this._createControl(O));return new Ti(E,s,d)}_reduceControls(n){let s={};return Object.keys(n).forEach(d=>{s[d]=this._createControl(n[d])}),s}_createControl(n){if(n instanceof In)return n;if(n instanceof Yt)return n;if(Array.isArray(n)){let s=n[0],d=n.length>1?n[1]:null,E=n.length>2?n[2]:null;return this.control(s,d,E)}else return this.control(n)}static \u0275fac=function(s){return new(s||o)};static \u0275prov=pr({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Go=(()=>{class o{static withConfig(n){return{ngModule:o,providers:[{provide:Vr,useValue:n.callSetDisabledState??Mr}]}}static \u0275fac=function(s){return new(s||o)};static \u0275mod=Gt({type:o});static \u0275inj=Kt({imports:[qo]})}return o})(),kr=(()=>{class o{static withConfig(n){return{ngModule:o,providers:[{provide:Bo,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Vr,useValue:n.callSetDisabledState??Mr}]}}static \u0275fac=function(s){return new(s||o)};static \u0275mod=Gt({type:o});static \u0275inj=Kt({imports:[qo]})}return o})();function Al(o,r){if(o&1&&Ht(0,"img",1),o&2){let n=q();gr("src",n.src,at)}}function Dl(o,r){if(o&1&&(le(0,"span"),P(1),me()),o&2){let n=q();j(),pe(n.initials)}}var ut=class o{name="";src="";size=40;textColor="#FFFFFF";palette=["#1abc9c","#2ecc71","#3498db","#9b59b6","#e67e22","#e74c3c","#f39c12","#16a085","#2980b9","#8e44ad","#d35400","#c0392b"];get fontSize(){return Math.floor(this.size*.5)}get initials(){if(!this.name)return"";let r=this.name.trim().split(/\s+/).filter(Boolean);return r.length===1?r[0][0].toUpperCase():(r[0][0]+r[r.length-1][0]).toUpperCase()}get bgColor(){if(!this.name)return this.palette[0];let r=0;for(let s=0;s<this.name.length;s++)r=this.name.charCodeAt(s)+((r<<5)-r);let n=Math.abs(r)%this.palette.length;return this.palette[n]}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=ve({type:o,selectors:[["app-avatar"]],inputs:{name:"name",src:"src",size:"size"},decls:3,vars:11,consts:[[1,"avatar"],[3,"src"]],template:function(n,s){n&1&&(le(0,"div",0),oe(1,Al,1,1,"img",1)(2,Dl,2,1,"span"),me()),n&2&&(eo("width",s.size,"px")("height",s.size,"px")("background",s.bgColor)("color",s.textColor)("font-size",s.fontSize,"px"),j(),se(s.src?1:2))},styles:[".avatar[_ngcontent-%COMP%]{border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;overflow:hidden;text-transform:uppercase}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})};var Fr=class o{constructor(r){this.activeModal=r}userDetails;closeModal(){this.activeModal.dismissAll()}static \u0275fac=function(n){return new(n||o)(K(Re))};static \u0275cmp=ve({type:o,selectors:[["app-user-details"]],inputs:{userDetails:"userDetails"},decls:36,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"card","p-3"],[1,"d-flex","justify-content-center","align-items-center"],[3,"name","src","size"],[1,"card-body"],[1,"table","table-bordered"],[1,"badge"]],template:function(n,s){n&1&&(S(0,"div",0)(1,"h5",1),P(2,"User Details"),V(),S(3,"button",2),ee("click",function(){return s.closeModal()}),V()(),S(4,"div",3)(5,"div",4),Ne(6,"app-avatar",5),V(),S(7,"div",6)(8,"table",7)(9,"tbody")(10,"tr")(11,"th"),P(12,"ID"),V(),S(13,"td"),P(14),V()(),S(15,"tr")(16,"th"),P(17,"Name"),V(),S(18,"td"),P(19),V()(),S(20,"tr")(21,"th"),P(22,"Email"),V(),S(23,"td"),P(24),V()(),S(25,"tr")(26,"th"),P(27,"Role"),V(),S(28,"td"),P(29),V()(),S(30,"tr")(31,"th"),P(32,"Status"),V(),S(33,"td")(34,"span",8),P(35),V()()()()()()()),n&2&&(j(6),ie("name",s.userDetails.name)("src",s.userDetails.avatar)("size",100),j(8),pe(s.userDetails.id),j(5),pe(s.userDetails.name),j(5),pe(s.userDetails.email),j(5),pe(s.userDetails.role),j(5),fe("bg-success",s.userDetails.status==="Active")("bg-secondary",s.userDetails.status==="Inactive"),j(),Be(" ",s.userDetails.status," "))},dependencies:[ut],styles:[".btn-close[_ngcontent-%COMP%]{box-shadow:none!important}.card[_ngcontent-%COMP%]{border:none}"]})};var Sl=["video"];function Vl(o,r){if(o&1&&(le(0,"div",4),Ht(1,"img",7),me()),o&2){let n=q();j(),gr("src",n.photoPreview(),at)}}function Ml(o,r){o&1&&Ht(0,"video",5,0)}function Pl(o,r){if(o&1){let n=_e();le(0,"i",8),Se("click",function(){X(n);let d=q();return Z(d.removePhoto())}),me(),le(1,"i",9),Se("click",function(){X(n);let d=q();return Z(d.confirmPhoto())}),me()}}function Il(o,r){if(o&1){let n=_e();le(0,"i",10),Se("click",function(){X(n);let d=q();return Z(d.capturePhoto())}),me(),le(1,"i",11),Se("click",function(){X(n);let d=q();return Z(d.switchCamera())}),me()}}var Or=class o{video;photoSelected=new xe;stream;facingMode="environment";photoPreview=Oe(null);ngAfterViewInit(){this.startCamera()}ngOnDestroy(){this.stopCamera()}async startCamera(){this.stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:this.facingMode}}),this.video.nativeElement.srcObject=this.stream}stopCamera(){this.stream?.getTracks().forEach(r=>r.stop())}switchCamera(){this.stopCamera(),this.facingMode=this.facingMode==="user"?"environment":"user",this.startCamera()}capturePhoto(){let r=document.createElement("canvas");r.width=this.video.nativeElement.videoWidth,r.height=this.video.nativeElement.videoHeight,r.getContext("2d")?.drawImage(this.video.nativeElement,0,0,r.width,r.height);let s=r.toDataURL("image/jpeg");this.photoPreview.set(s),this.stopCamera()}confirmPhoto(){this.photoPreview()&&this.photoSelected.emit(this.photoPreview())}removePhoto(){this.photoPreview.set(null),this.startCamera()}closeModal(){this.stopCamera(),this.photoSelected.emit(null)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=ve({type:o,selectors:[["app-camera"]],viewQuery:function(n,s){if(n&1&&Ja(Sl,5),n&2){let d;Xa(d=Za())&&(s.video=d.first)}},outputs:{photoSelected:"photoSelected"},decls:9,vars:2,consts:[["video",""],[1,"d-flex","justify-content-end","align-items-center","pe-3","pt-1",3,"click"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"camera-container","p-3"],[1,"preview"],["autoplay","","muted","","playsinline","",1,"camera-video"],[1,"camera-actions"],[1,"profile-pic",3,"src"],["role","button",1,"fa-solid","fa-xmark","fa-2x",3,"click"],["role","button",1,"fa-solid","fa-check","fa-2x",3,"click"],["role","button",1,"fa-solid","fa-camera","fa-2x",3,"click"],["role","button",1,"fa-solid","fa-rotate","fa-2x",3,"click"]],template:function(n,s){n&1&&(le(0,"div")(1,"div",1),Se("click",function(){return s.closeModal()}),Ht(2,"button",2),me(),le(3,"div",3),oe(4,Vl,2,1,"div",4)(5,Ml,2,0,"video",5),le(6,"div",6),oe(7,Pl,2,0)(8,Il,2,0),me()()()),n&2&&(j(4),se(s.photoPreview()?4:5),j(3),se(s.photoPreview()?7:8))},styles:[".camera-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.camera-video[_ngcontent-%COMP%]{width:50vw;background:#000}.preview[_ngcontent-%COMP%]   img.profile-pic[_ngcontent-%COMP%]{width:50vw;border:2px solid #ccc}.camera-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:35vw}.btn-close[_ngcontent-%COMP%]{box-shadow:none!important}"]})};var Zt=class o{constructor(r,n){this.activeModal=r;this.modalService=n}photoSelected=new xe;openCamera(){let r=this.modalService.open(Or,{size:"lg"});r.componentInstance.photoSelected.subscribe(n=>{n&&this.photoSelected.emit(n),r.close()})}onFileSelected(r){let n=r.target;if(n.files&&n.files[0]){let s=new FileReader;s.onload=()=>{this.photoSelected.emit(s.result),this.activeModal.close()},s.readAsDataURL(n.files[0])}}static \u0275fac=function(n){return new(n||o)(K(so),K(Re))};static \u0275cmp=ve({type:o,selectors:[["app-profile-pic-update"]],outputs:{photoSelected:"photoSelected"},decls:9,vars:0,consts:[["fileInput",""],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","justify-content-around","py-5"],["role","button",1,"fa-solid","fa-camera","fa-3x",3,"click"],["role","button",1,"fa-solid","fa-upload","fa-3x",3,"click"],["type","file","accept","image/*","hidden","",3,"change"]],template:function(n,s){if(n&1){let d=_e();le(0,"div",1)(1,"h5",2),P(2,"Update Photo"),me(),le(3,"button",3),Se("click",function(){return X(d),Z(s.activeModal.dismiss())}),me()(),le(4,"div",4)(5,"i",5),Se("click",function(){return X(d),Z(s.openCamera())}),me(),le(6,"i",6),Se("click",function(){X(d);let O=Ve(8);return Z(O.click())}),me(),le(7,"input",7,0),Se("change",function(O){return X(d),Z(s.onFileSelected(O))}),me()()}},styles:[".btn-close[_ngcontent-%COMP%]{box-shadow:none!important}"]})};var Wi=[{id:1e3,name:"John Doe",email:"john.doe@example.com",role:"Admin",status:"Active",avatar:""},{id:1001,name:"Jane Smith",email:"jane.smith@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1002,name:"Michael Johnson",email:"michael.j@example.com",role:"Viewer",status:"Active",avatar:""},{id:1003,name:"Emily Davis",email:"emily.d@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1004,name:"Daniel Wilson",email:"daniel.w@example.com",role:"Editor",status:"Active",avatar:""},{id:1005,name:"Sophia Martinez",email:"sophia.m@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1006,name:"Liam Brown",email:"liam.b@example.com",role:"Admin",status:"Active",avatar:""},{id:1007,name:"Olivia Taylor",email:"olivia.t@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1008,name:"Noah Anderson",email:"noah.a@example.com",role:"Viewer",status:"Active",avatar:""},{id:1009,name:"Ava Thomas",email:"ava.t@example.com",role:"Admin",status:"Active",avatar:""},{id:1010,name:"William Jackson",email:"william.j@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1011,name:"Isabella White",email:"isabella.w@example.com",role:"Viewer",status:"Active",avatar:""},{id:1012,name:"James Harris",email:"james.h@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1013,name:"Mia Martin",email:"mia.m@example.com",role:"Editor",status:"Active",avatar:""},{id:1014,name:"Benjamin Thompson",email:"benjamin.t@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1015,name:"Charlotte Garcia",email:"charlotte.g@example.com",role:"Admin",status:"Active",avatar:""},{id:1016,name:"Lucas Martinez",email:"lucas.m@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1017,name:"Amelia Robinson",email:"amelia.r@example.com",role:"Viewer",status:"Active",avatar:""},{id:1018,name:"Henry Clark",email:"henry.c@example.com",role:"Admin",status:"Active",avatar:""},{id:1019,name:"Harper Rodriguez",email:"harper.r@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1020,name:"Alexander Lewis",email:"alex.l@example.com",role:"Viewer",status:"Active",avatar:""},{id:1021,name:"Evelyn Lee",email:"evelyn.l@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1022,name:"Jackson Walker",email:"jackson.w@example.com",role:"Editor",status:"Active",avatar:""},{id:1023,name:"Abigail Hall",email:"abby.h@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1024,name:"Sebastian Young",email:"sebastian.y@example.com",role:"Admin",status:"Active",avatar:""},{id:1025,name:"Ella Allen",email:"ella.a@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1026,name:"Jack King",email:"jack.k@example.com",role:"Viewer",status:"Active",avatar:""},{id:1027,name:"Grace Wright",email:"grace.w@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1028,name:"Mateo Scott",email:"mateo.s@example.com",role:"Editor",status:"Active",avatar:""},{id:1029,name:"Chloe Green",email:"chloe.g@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1030,name:"David Adams",email:"david.a@example.com",role:"Admin",status:"Active",avatar:""},{id:1031,name:"Scarlett Nelson",email:"scarlett.n@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1032,name:"Joseph Baker",email:"joseph.b@example.com",role:"Viewer",status:"Active",avatar:""},{id:1033,name:"Victoria Perez",email:"victoria.p@example.com",role:"Admin",status:"Active",avatar:""},{id:1034,name:"Samuel Roberts",email:"samuel.r@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1035,name:"Hannah Turner",email:"hannah.t@example.com",role:"Viewer",status:"Active",avatar:""},{id:1036,name:"Matthew Phillips",email:"matt.p@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1037,name:"Avery Campbell",email:"avery.c@example.com",role:"Editor",status:"Active",avatar:""},{id:1038,name:"Wyatt Parker",email:"wyatt.p@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1039,name:"Eleanor Evans",email:"eleanor.e@example.com",role:"Admin",status:"Active",avatar:""},{id:1040,name:"Owen Edwards",email:"owen.e@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1041,name:"Aria Collins",email:"aria.c@example.com",role:"Viewer",status:"Active",avatar:""},{id:1042,name:"Gabriel Stewart",email:"gabriel.s@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1043,name:"Lily Sanchez",email:"lily.s@example.com",role:"Editor",status:"Active",avatar:""},{id:1044,name:"Isaac Morris",email:"isaac.m@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1045,name:"Nora Rogers",email:"nora.r@example.com",role:"Admin",status:"Active",avatar:""},{id:1046,name:"Jayden Reed",email:"jayden.r@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1047,name:"Luna Cook",email:"luna.c@example.com",role:"Viewer",status:"Active",avatar:""},{id:1048,name:"Elijah Morgan",email:"elijah.m@example.com",role:"Admin",status:"Active",avatar:""},{id:1049,name:"Zoey Bell",email:"zoey.b@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1050,name:"Jacob Murphy",email:"jacob.m@example.com",role:"Viewer",status:"Active",avatar:""},{id:1051,name:"Mila Bailey",email:"mila.b@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1052,name:"Logan Rivera",email:"logan.r@example.com",role:"Editor",status:"Active",avatar:""},{id:1053,name:"Layla Cooper",email:"layla.c@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1054,name:"Ethan Richardson",email:"ethan.r@example.com",role:"Admin",status:"Active",avatar:""},{id:1055,name:"Riley Cox",email:"riley.c@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1056,name:"Caleb Howard",email:"caleb.h@example.com",role:"Viewer",status:"Active",avatar:""},{id:1057,name:"Hazel Ward",email:"hazel.w@example.com",role:"Admin",status:"Active",avatar:""},{id:1058,name:"Nathan Torres",email:"nathan.t@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1059,name:"Violet Peterson",email:"violet.p@example.com",role:"Viewer",status:"Active",avatar:""},{id:1060,name:"Aaron Knight",email:"aaron.k@example.com",role:"Admin",status:"Active",avatar:""},{id:1061,name:"Bella Foster",email:"bella.f@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1062,name:"Calvin Russell",email:"calvin.r@example.com",role:"Viewer",status:"Active",avatar:""},{id:1063,name:"Daisy Hayes",email:"daisy.h@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1064,name:"Eli Bennett",email:"eli.b@example.com",role:"Editor",status:"Active",avatar:""},{id:1065,name:"Faith Hudson",email:"faith.h@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1066,name:"Gavin Coleman",email:"gavin.c@example.com",role:"Admin",status:"Active",avatar:""},{id:1067,name:"Hazel Dixon",email:"hazel.d@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1068,name:"Ian Freeman",email:"ian.f@example.com",role:"Viewer",status:"Active",avatar:""},{id:1069,name:"Jade Griffin",email:"jade.g@example.com",role:"Admin",status:"Active",avatar:""},{id:1070,name:"Kai Harper",email:"kai.h@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1071,name:"Lila Porter",email:"lila.p@example.com",role:"Viewer",status:"Active",avatar:""},{id:1072,name:"Mason Wheeler",email:"mason.w@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1073,name:"Nina Stone",email:"nina.s@example.com",role:"Editor",status:"Active",avatar:""},{id:1074,name:"Owen Butler",email:"owen.b@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1075,name:"Piper Lawrence",email:"piper.l@example.com",role:"Admin",status:"Active",avatar:""},{id:1076,name:"Quinn Palmer",email:"quinn.p@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1077,name:"Ryan Holmes",email:"ryan.h@example.com",role:"Viewer",status:"Active",avatar:""},{id:1078,name:"Sophie Gilbert",email:"sophie.g@example.com",role:"Admin",status:"Active",avatar:""},{id:1079,name:"Tyler Bishop",email:"tyler.b@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1080,name:"Uma Chapman",email:"uma.c@example.com",role:"Viewer",status:"Active",avatar:""},{id:1081,name:"Victor Dean",email:"victor.d@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1082,name:"Wendy Hayes",email:"wendy.h@example.com",role:"Editor",status:"Active",avatar:""},{id:1083,name:"Xavier Lawson",email:"xavier.l@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1084,name:"Yara Griffin",email:"yara.g@example.com",role:"Admin",status:"Active",avatar:""},{id:1085,name:"Zane Bennett",email:"zane.b@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1086,name:"Abby Reynolds",email:"abby.r@example.com",role:"Viewer",status:"Active",avatar:""},{id:1087,name:"Blake Simmons",email:"blake.s@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1088,name:"Cara Duncan",email:"cara.d@example.com",role:"Editor",status:"Active",avatar:""},{id:1089,name:"Derek Hoffman",email:"derek.h@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1090,name:"Ella Vaughn",email:"ella.v@example.com",role:"Admin",status:"Active",avatar:""},{id:1091,name:"Felix Andrews",email:"felix.a@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1092,name:"Gina Monroe",email:"gina.m@example.com",role:"Viewer",status:"Active",avatar:""},{id:1093,name:"Hunter Ford",email:"hunter.f@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1094,name:"Ivy Grant",email:"ivy.g@example.com",role:"Editor",status:"Active",avatar:""},{id:1095,name:"Jackie Riley",email:"jackie.r@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1096,name:"Kyle Sutton",email:"kyle.s@example.com",role:"Admin",status:"Active",avatar:""},{id:1097,name:"Lana Steele",email:"lana.s@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1098,name:"Milo Bishop",email:"milo.b@example.com",role:"Viewer",status:"Active",avatar:""},{id:1099,name:"Nora Pratt",email:"nora.p@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1100,name:"Omar Wallace",email:"omar.w@example.com",role:"Editor",status:"Active",avatar:""},{id:1101,name:"Paige Daniels",email:"paige.d@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1102,name:"Quincy Nash",email:"quincy.n@example.com",role:"Admin",status:"Active",avatar:""},{id:1103,name:"Rosa Fleming",email:"rosa.f@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1104,name:"Sean Bradley",email:"sean.b@example.com",role:"Viewer",status:"Active",avatar:""},{id:1105,name:"Tina Chapman",email:"tina.c@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1106,name:"Ulysses Holt",email:"ulysses.h@example.com",role:"Editor",status:"Active",avatar:""},{id:1107,name:"Vanessa Lowe",email:"vanessa.l@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1108,name:"Wyatt Cameron",email:"wyatt.c@example.com",role:"Admin",status:"Active",avatar:""},{id:1109,name:"Xena Hoffman",email:"xena.h@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1110,name:"Yusuf Pierce",email:"yusuf.p@example.com",role:"Viewer",status:"Active",avatar:""},{id:1111,name:"Zara McCarthy",email:"zara.m@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1112,name:"Alec Ortiz",email:"alec.o@example.com",role:"Editor",status:"Active",avatar:""},{id:1113,name:"Bianca Robbins",email:"bianca.r@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1114,name:"Carter Webb",email:"carter.w@example.com",role:"Admin",status:"Active",avatar:""},{id:1115,name:"Daphne Flynn",email:"daphne.f@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1116,name:"Evan Kirby",email:"evan.k@example.com",role:"Viewer",status:"Active",avatar:""},{id:1117,name:"Fiona Barrett",email:"fiona.b@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1118,name:"Gideon Tucker",email:"gideon.t@example.com",role:"Editor",status:"Active",avatar:""},{id:1119,name:"Holly Chavez",email:"holly.c@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1120,name:"Ian Sutton",email:"ian.sutton@example.com",role:"Admin",status:"Active",avatar:""},{id:1121,name:"Jocelyn Bates",email:"jocelyn.b@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1122,name:"Kevin Lowe",email:"kevin.lowe@example.com",role:"Viewer",status:"Active",avatar:""},{id:1123,name:"Lara Middleton",email:"lara.middleton@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1124,name:"Marcus Fields",email:"marcus.fields@example.com",role:"Editor",status:"Active",avatar:""},{id:1125,name:"Nadia Armstrong",email:"nadia.armstrong@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1126,name:"Owen Harper",email:"owen.harper@example.com",role:"Admin",status:"Active",avatar:""},{id:1127,name:"Paula Wagner",email:"paula.wagner@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1128,name:"Quentin Miles",email:"quentin.miles@example.com",role:"Viewer",status:"Active",avatar:""},{id:1129,name:"Rebecca Shaw",email:"rebecca.shaw@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1130,name:"Samuel Reid",email:"samuel.reid@example.com",role:"Editor",status:"Active",avatar:""},{id:1131,name:"Tara West",email:"tara.west@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1132,name:"Umar Pope",email:"umar.pope@example.com",role:"Admin",status:"Active",avatar:""},{id:1133,name:"Vanessa Lowe",email:"vanessa.lowe@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1134,name:"William Kerr",email:"william.kerr@example.com",role:"Viewer",status:"Active",avatar:""},{id:1135,name:"Ximena Chavez",email:"ximena.chavez@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1136,name:"Yahir Moreno",email:"yahir.moreno@example.com",role:"Editor",status:"Active",avatar:""},{id:1137,name:"Zoe Briggs",email:"zoe.briggs@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1138,name:"Aidan Norris",email:"aidan.norris@example.com",role:"Admin",status:"Active",avatar:""},{id:1139,name:"Brooke Marsh",email:"brooke.marsh@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1140,name:"Colton Flynn",email:"colton.flynn@example.com",role:"Viewer",status:"Active",avatar:""},{id:1141,name:"Delilah Curtis",email:"delilah.curtis@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1142,name:"Ethan Moody",email:"ethan.moody@example.com",role:"Editor",status:"Active",avatar:""},{id:1143,name:"Felicity Garrett",email:"felicity.garrett@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1144,name:"Grayson Park",email:"grayson.park@example.com",role:"Admin",status:"Active",avatar:""},{id:1145,name:"Harper Lane",email:"harper.lane@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1146,name:"Isaac Hart",email:"isaac.hart@example.com",role:"Viewer",status:"Active",avatar:""},{id:1147,name:"Jasmine Knox",email:"jasmine.knox@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1148,name:"Kyle Vincent",email:"kyle.vincent@example.com",role:"Editor",status:"Active",avatar:""},{id:1149,name:"Lydia Bowman",email:"lydia.bowman@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1150,name:"Maverick Hunt",email:"maverick.hunt@example.com",role:"Admin",status:"Active",avatar:""},{id:1151,name:"Nina Foley",email:"nina.foley@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1152,name:"Oscar Brewer",email:"oscar.brewer@example.com",role:"Viewer",status:"Active",avatar:""},{id:1153,name:"Peyton Barker",email:"peyton.barker@example.com",role:"Admin",status:"Inactive",avatar:""},{id:1154,name:"Quinn Lowe",email:"quinn.lowe@example.com",role:"Editor",status:"Active",avatar:""},{id:1155,name:"Ruby Moran",email:"ruby.moran@example.com",role:"Viewer",status:"Inactive",avatar:""},{id:1156,name:"Sebastian Cross",email:"sebastian.cross@example.com",role:"Admin",status:"Active",avatar:""},{id:1157,name:"Talia Bishop",email:"talia.bishop@example.com",role:"Editor",status:"Inactive",avatar:""},{id:1158,name:"Uriel Stevens",email:"uriel.stevens@example.com",role:"Viewer",status:"Active",avatar:""},{id:1159,name:"Vivian Knox",email:"vivian.knox@example.com",role:"Admin",status:"Inactive",avatar:""}];var Nr=ks(Ho(),1),zo=Symbol.for("Dexie"),Tr=globalThis[zo]||(globalThis[zo]=Nr.default);if(Nr.default.semVer!==Tr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Nr.default.semVer} and ${Tr.semVer}`);var{liveQuery:Lu,mergeRanges:Ku,rangesOverlap:qu,RangeSet:Gu,cmp:Hu,Entity:zu,PropModification:Wu,replacePrefix:$u,add:Yu,remove:Qu,DexieYProvider:Ju}=Tr;var Wo=Tr;var Qi=class extends Wo{users;constructor(){super("UserDB"),this.version(1).stores({users:"id"})}},en=new Qi;var He=class o{usersSignal=Oe([]);users=this.usersSignal.asReadonly();constructor(){this.init()}async init(){let r=await en.users.toArray();r.length===0?(await en.users.bulkAdd(Wi),this.usersSignal.set(Wi)):this.usersSignal.set(r)}async addUser(r){await en.users.add(r),this.usersSignal.set([...this.usersSignal(),r])}async updateUser(r){await en.users.put(r);let n=this.usersSignal().map(s=>s.id===r.id?r:s);this.usersSignal.set(n)}async deleteUser(r){await en.users.delete(r);let n=this.usersSignal().filter(s=>s.id!==r);this.usersSignal.set(n)}static \u0275fac=function(n){return new(n||o)};static \u0275prov=pr({token:o,factory:o.\u0275fac,providedIn:"root"})};function kl(o,r){if(o&1){let n=_e();S(0,"a",22),ee("click",function(){X(n);let d=q();return Z(d.removePic())}),P(1,"Remove"),V()}}function Fl(o,r){o&1&&(S(0,"span"),P(1," Name is required. "),V())}function Ol(o,r){o&1&&(S(0,"span"),P(1," Name cannot exceed 50 characters. "),V())}function Nl(o,r){o&1&&(S(0,"span"),P(1," Email is required. "),V())}function Tl(o,r){o&1&&(S(0,"span"),P(1," Enter a valid email address. "),V())}var Rr=class o{constructor(r,n,s,d){this.fb=r;this.modalService=n;this.service=s;this.toastService=d}userForm;imagePreview=Oe(null);ngOnInit(){this.userForm=this.fb.group({name:["",[Me.required,Me.maxLength(30)]],email:["",[Me.required,Me.email]],role:["",Me.required],avatar:[null]})}closeModal(){this.modalService.dismissAll()}getNextId(){return this.service.users().length?Math.max(...this.service.users().map(r=>r.id))+1:1e3}submit(){let r=this.userForm.value;r.id=this.getNextId(),r.status="Inactive",this.service.addUser(r),this.closeModal(),this.toastService.show("User Created Successfully!")}removePic(){this.imagePreview.set(null),this.userForm.patchValue({avatar:null})}openUpdateModal(){let r=this.modalService.open(Zt,{centered:!0,size:"md",backdrop:"static"});r.componentInstance.photoSelected.subscribe(n=>{r.close(),this.imagePreview.set(n),this.userForm.patchValue({avatar:n})})}static \u0275fac=function(n){return new(n||o)(K(Ir),K(Re),K(He),K(zt))};static \u0275cmp=ve({type:o,selectors:[["app-add-user"]],decls:43,vars:14,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"m-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"pro-pic-container"],[1,"profile-pic",3,"src"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],["role","button",1,"text-decoration-none",3,"click"],["role","button",1,"text-decoration-none","ms-2"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],[1,"invalid-feedback"],["type","email","formControlName","email",1,"form-control"],["formControlName","role",1,"form-select"],["value",""],["value","Admin"],["value","User"],["value","Manager"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"],["role","button",1,"text-decoration-none","ms-2",3,"click"]],template:function(n,s){if(n&1&&(S(0,"div",0)(1,"h5",1),P(2,"Add User"),V(),S(3,"button",2),ee("click",function(){return s.closeModal()}),V()(),S(4,"div",3)(5,"form",4),ee("ngSubmit",function(){return s.submit()}),S(6,"div",5)(7,"div",6),Ne(8,"img",7),S(9,"div",8)(10,"a",9),ee("click",function(){return s.openUpdateModal()}),P(11,"Update"),V(),oe(12,kl,2,0,"a",10),V()(),S(13,"label",11),P(14,"Name"),V(),Ne(15,"input",12),S(16,"div",13),oe(17,Fl,2,0,"span"),oe(18,Ol,2,0,"span"),V()(),S(19,"div",5)(20,"label",11),P(21,"Email"),V(),Ne(22,"input",14),S(23,"div",13),oe(24,Nl,2,0,"span"),oe(25,Tl,2,0,"span"),V()(),S(26,"div",5)(27,"label",11),P(28,"Role"),V(),S(29,"select",15)(30,"option",16),P(31,"Select role"),V(),S(32,"option",17),P(33,"Admin"),V(),S(34,"option",18),P(35,"User"),V(),S(36,"option",19),P(37,"Manager"),V()(),S(38,"div",13),P(39,"Role is required."),V()(),S(40,"div",20)(41,"button",21),P(42," Create User "),V()()()()),n&2){let d,E,O,W,re,Y,ue;j(5),ie("formGroup",s.userForm),j(3),ie("src",s.imagePreview()||"images/profile-pic.png",at),j(4),se(s.imagePreview()?12:-1),j(3),fe("is-invalid",((d=s.userForm.get("name"))==null?null:d.invalid)&&((d=s.userForm.get("name"))==null?null:d.touched)),j(2),se(!((E=s.userForm.get("name"))==null||E.errors==null)&&E.errors.required?17:-1),j(),se(!((O=s.userForm.get("name"))==null||O.errors==null)&&O.errors.maxlength?18:-1),j(4),fe("is-invalid",((W=s.userForm.get("email"))==null?null:W.invalid)&&((W=s.userForm.get("email"))==null?null:W.touched)),j(2),se(!((re=s.userForm.get("email"))==null||re.errors==null)&&re.errors.required?24:-1),j(),se(!((Y=s.userForm.get("email"))==null||Y.errors==null)&&Y.errors.email?25:-1),j(4),fe("is-invalid",((ue=s.userForm.get("role"))==null?null:ue.invalid)&&((ue=s.userForm.get("role"))==null?null:ue.touched)),j(12),ie("disabled",s.userForm.invalid)}},dependencies:[kr,Pr,Jt,Xt,st,lt,Qt,Dr,Nn,On,vr],styles:[".btn-close[_ngcontent-%COMP%]{box-shadow:none!important}.profile-pic[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%}.pro-pic-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}"]})};function jl(o,r){if(o&1&&Ne(0,"img",5),o&2){let n=q();ie("src",n.imagePreview()||"images/profile-pic.png",at)}}function Rl(o,r){if(o&1&&Ne(0,"app-avatar",6),o&2){let n=q();ie("name",n.userDetails.name)("src",n.userDetails.avatar)("size",100)}}function Ul(o,r){if(o&1){let n=_e();S(0,"a",23),ee("click",function(){X(n);let d=q();return Z(d.removePic())}),P(1,"Remove"),V()}}function Bl(o,r){o&1&&(S(0,"span"),P(1," Name is required. "),V())}function Ll(o,r){o&1&&(S(0,"span"),P(1," Name cannot exceed 50 characters. "),V())}function Kl(o,r){o&1&&(S(0,"span"),P(1," Email is required. "),V())}function ql(o,r){o&1&&(S(0,"span"),P(1," Enter a valid email address. "),V())}var Ur=class o{constructor(r,n,s,d){this.fb=r;this.modalService=n;this.service=s;this.toastService=d}userDetails;editUserForm;imagePreview=Oe(null);ngOnInit(){this.editUserForm=this.fb.group({name:[this.userDetails.name,[Me.required,Me.maxLength(30)]],email:[this.userDetails.email,[Me.required,Me.email]],role:[this.userDetails.role,Me.required],avatar:[null]})}removePic(){this.imagePreview.set(null),this.editUserForm.patchValue({avatar:null})}openUpdateModal(){let r=this.modalService.open(Zt,{centered:!0,size:"md",backdrop:"static"});r.componentInstance.photoSelected.subscribe(n=>{r.close(),this.imagePreview.set(n),this.editUserForm.patchValue({avatar:n})})}closeModal(){this.modalService.dismissAll()}submit(){let r=this.editUserForm.value;r.id=this.userDetails.id,r.status=this.userDetails.status,this.service.updateUser(r),this.closeModal(),this.toastService.show("User Details Updated Successfully!")}static \u0275fac=function(n){return new(n||o)(K(Ir),K(Re),K(He),K(zt))};static \u0275cmp=ve({type:o,selectors:[["app-edit-user"]],inputs:{userDetails:"userDetails"},decls:44,vars:14,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"m-4"],[1,"pro-pic-container"],[1,"profile-pic",3,"src"],[3,"name","src","size"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],["role","button",1,"text-decoration-none",3,"click"],["role","button",1,"text-decoration-none","ms-2"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],[1,"invalid-feedback"],["type","email","formControlName","email",1,"form-control"],["formControlName","role",1,"form-select"],["value",""],["value","Admin"],["value","User"],["value","Manager"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"],["role","button",1,"text-decoration-none","ms-2",3,"click"]],template:function(n,s){if(n&1&&(S(0,"div",0)(1,"h5",1),P(2,"Edit User"),V(),S(3,"button",2),ee("click",function(){return s.closeModal()}),V()(),S(4,"div",3)(5,"div",4),oe(6,jl,1,1,"img",5)(7,Rl,1,3,"app-avatar",6),S(8,"div",7)(9,"a",8),ee("click",function(){return s.openUpdateModal()}),P(10,"Update"),V(),oe(11,Ul,2,0,"a",9),V()(),S(12,"form",10),ee("ngSubmit",function(){return s.submit()}),S(13,"div",11)(14,"label",12),P(15,"Name"),V(),Ne(16,"input",13),S(17,"div",14),oe(18,Bl,2,0,"span"),oe(19,Ll,2,0,"span"),V()(),S(20,"div",11)(21,"label",12),P(22,"Email"),V(),Ne(23,"input",15),S(24,"div",14),oe(25,Kl,2,0,"span"),oe(26,ql,2,0,"span"),V()(),S(27,"div",11)(28,"label",12),P(29,"Role"),V(),S(30,"select",16)(31,"option",17),P(32,"Select role"),V(),S(33,"option",18),P(34,"Admin"),V(),S(35,"option",19),P(36,"User"),V(),S(37,"option",20),P(38,"Manager"),V()(),S(39,"div",14),P(40," Role is required. "),V()(),S(41,"div",21)(42,"button",22),P(43," Update "),V()()()()),n&2){let d,E,O,W,re,Y,ue;j(6),se(s.imagePreview()?6:7),j(5),se(s.imagePreview()?11:-1),j(),ie("formGroup",s.editUserForm),j(4),fe("is-invalid",((d=s.editUserForm.get("name"))==null?null:d.invalid)&&((d=s.editUserForm.get("name"))==null?null:d.touched)),j(2),se(!((E=s.editUserForm.get("name"))==null||E.errors==null)&&E.errors.required?18:-1),j(),se(!((O=s.editUserForm.get("name"))==null||O.errors==null)&&O.errors.maxlength?19:-1),j(4),fe("is-invalid",((W=s.editUserForm.get("email"))==null?null:W.invalid)&&((W=s.editUserForm.get("email"))==null?null:W.touched)),j(2),se(!((re=s.editUserForm.get("email"))==null||re.errors==null)&&re.errors.required?25:-1),j(),se(!((Y=s.editUserForm.get("email"))==null||Y.errors==null)&&Y.errors.email?26:-1),j(4),fe("is-invalid",((ue=s.editUserForm.get("role"))==null?null:ue.invalid)&&((ue=s.editUserForm.get("role"))==null?null:ue.touched)),j(12),ie("disabled",s.editUserForm.invalid)}},dependencies:[ut,kr,Pr,Jt,Xt,st,lt,Qt,Dr,Nn,On],styles:[".btn-close[_ngcontent-%COMP%]{box-shadow:none!important}.profile-pic[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%}.pro-pic-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}"]})};var Br=class o{constructor(r,n,s){this.service=r;this.activeModal=n;this.toastService=s}userId;deleteUser(){this.service.deleteUser(this.userId),this.closeModal(),this.toastService.show("User Deleted Successfully!")}closeModal(){this.activeModal.dismissAll()}static \u0275fac=function(n){return new(n||o)(K(He),K(Re),K(zt))};static \u0275cmp=ve({type:o,selectors:[["app-delete-confirmation"]],inputs:{userId:"userId"},decls:8,vars:0,consts:[[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,s){n&1&&(le(0,"div",0)(1,"p"),P(2,"Are you sure you want to delete this user warning?"),me()(),le(3,"div",1)(4,"button",2),Se("click",function(){return s.closeModal()}),P(5,"Cancel"),me(),le(6,"button",3),Se("click",function(){return s.deleteUser()}),P(7,"Delete"),me()())},encapsulation:2})};var Gl=(o,r)=>({itemsPerPage:o,currentPage:r,id:"users-pagination"}),Hl=(o,r)=>r.id;function zl(o,r){if(o&1){let n=_e();S(0,"tr",12)(1,"td"),P(2),V(),S(3,"td",13),Ne(4,"app-avatar",14),S(5,"span",15),P(6),V()(),S(7,"td"),P(8),V(),S(9,"td"),P(10),V(),S(11,"td")(12,"span",16),P(13),V()(),S(14,"td")(15,"i",17),ee("click",function(){let d=X(n).$implicit,E=q(2);return Z(E.openUserDetails(d))}),V(),S(16,"i",18),ee("click",function(){let d=X(n).$implicit,E=q(2);return Z(E.openEditUserModal(d))}),V(),S(17,"i",19),ee("click",function(){let d=X(n).$implicit,E=q(2);return Z(E.deleteUser(d.id))}),V()()()}if(o&2){let n=r.$implicit;j(2),pe(n.id),j(2),ie("name",n.name)("src",n.avatar)("size",36),j(2),pe(n.name),j(2),pe(n.email),j(2),pe(n.role),j(2),fe("bg-success",n.status==="Active")("bg-secondary",n.status==="Inactive"),j(),Be(" ",n.status," ")}}function Wl(o,r){if(o&1&&(S(0,"tbody"),Wa(1,zl,18,12,"tr",12,Hl),Cn(3,"paginate"),V()),o&2){let n=q();j(),$a(xn(3,0,n.filteredUsers(),no(3,Gl,n.pageSize,n.page)))}}function $l(o,r){o&1&&(S(0,"div",10)(1,"h6"),P(2,"No matching user found!"),V()())}function Yl(o,r){if(o&1){let n=_e();S(0,"div",11)(1,"pagination-controls",20),ee("pageChange",function(d){X(n);let E=q();return Z(E.page=d)}),V(),S(2,"select",21),Mi("ngModelChange",function(d){X(n);let E=q();return Vi(E.pageSize,d)||(E.pageSize=d),Z(d)}),ee("ngModelChange",function(){X(n);let d=q();return Z(d.onPageSizeChange())}),S(3,"option",22),P(4,"10"),V(),S(5,"option",23),P(6,"20"),V(),S(7,"option",24),P(8,"30"),V(),S(9,"option",25),P(10,"40"),V(),S(11,"option",26),P(12,"50"),V()()()}if(o&2){let n=q();j(2),Si("ngModel",n.pageSize)}}var Yo=class o{constructor(r,n){this.service=r;this.modal=n}onPageSizeChange(){this.page=1}page=1;searchText="";selectedUser;pageSize=10;filteredUsers(){return this.service.users().filter(n=>n.name.toLowerCase().includes(this.searchText.toLowerCase())||n.email.toLowerCase().includes(this.searchText.toLowerCase()))}openAddUserModal(){let r=this.modal.open(Rr,{centered:!0,size:"lg",backdrop:"static"})}openUserDetails(r){let n=this.modal.open(Fr,{centered:!0,size:"md",backdrop:"static"});n.componentInstance.userDetails=r}openEditUserModal(r){let n=this.modal.open(Ur,{centered:!0,size:"md",backdrop:"static"});n.componentInstance.userDetails=r}deleteUser(r){let n=this.modal.open(Br,{centered:!0,size:"sm",backdrop:"static"});n.componentInstance.userId=r}static \u0275fac=function(n){return new(n||o)(K(He),K(Re))};static \u0275cmp=ve({type:o,selectors:[["app-user-list"]],decls:27,vars:4,consts:[[1,"navbar","bg-body-tertiary"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex","search-add-container","justify-content-between"],["placeholder","Search by name or email",1,"form-control","me-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table-container","mt-4"],[1,"table"],[1,"table-light"],["width","200"],[1,"empty-result-container"],[1,"d-flex","justify-content-between","align-items-center","mt-5"],[1,"align-middle"],[1,"d-flex","align-items-center"],[3,"name","src","size"],[1,"ms-2"],[1,"badge"],["role","button",1,"fa-solid","fa-eye","me-1",3,"click"],["role","button",1,"fa-solid","fa-pen-to-square","mx-1",3,"click"],["role","button",1,"fa-solid","fa-trash-can","mx-1",3,"click"],["id","users-pagination",3,"pageChange"],["aria-label","Default select example",1,"form-select","me-3",3,"ngModelChange","ngModel"],["selected","","value","10"],["value","20"],["value","30"],["value","40"],["value","50"]],template:function(n,s){n&1&&(S(0,"nav",0)(1,"div",1)(2,"a",2),P(3,"User Management"),V(),S(4,"div",3)(5,"input",4),Mi("ngModelChange",function(E){return Vi(s.searchText,E)||(s.searchText=E),E}),V(),S(6,"button",5),ee("click",function(){return s.openAddUserModal()}),P(7,"+ Add User"),V()()()(),S(8,"div",6)(9,"table",7)(10,"thead",8)(11,"tr")(12,"th"),P(13,"ID"),V(),S(14,"th"),P(15,"Name"),V(),S(16,"th"),P(17,"Email"),V(),S(18,"th"),P(19,"Role"),V(),S(20,"th"),P(21,"Status"),V(),S(22,"th",9),P(23,"Actions"),V()()(),oe(24,Wl,4,6,"tbody"),V(),oe(25,$l,3,0,"div",10),V(),oe(26,Yl,13,1,"div",11)),n&2&&(j(5),Si("ngModel",s.searchText),j(19),se(s.filteredUsers().length>0?24:-1),j(),se(s.filteredUsers().length===0?25:-1),j(),se(s.filteredUsers().length>0?26:-1))},dependencies:[Go,Jt,Xt,st,lt,Qt,Hi,co,uo,ut,lo],styles:["input[_ngcontent-%COMP%]{width:64%}.search-add-container[_ngcontent-%COMP%]{width:40%}select[_ngcontent-%COMP%]{width:10%}.table-container[_ngcontent-%COMP%]{max-height:73vh;overflow-y:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#f8f9fa;z-index:1}.empty-result-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:60vh}"]})};export{Yo as UserList};
